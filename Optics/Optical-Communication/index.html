<!DOCTYPE html>


<html lang="en,zh-CN,default">
  

    <head>
      <meta charset="utf-8" />
        
      <meta
        name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1"
      />
      <title>Optical Communication Notes |  Peter&#39;s Blog</title>
  <meta name="generator" content="hexo-theme-ayer">
      
      <link rel="shortcut icon" href="/images/favicon.ico" />
       
<link rel="stylesheet" href="/dist/main.css">

      
<link rel="stylesheet" href="/css/fonts/remixicon.css">

      
<link rel="stylesheet" href="/css/custom.css">
 
      <script src="https://cdn.staticfile.org/pace/1.2.4/pace.min.js"></script>
       
 

      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-bulma@5.0.1/bulma.min.css"
      />
      <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.js"></script>

      <!-- mermaid -->
      
      <style>
        .swal2-styled.swal2-confirm {
          font-size: 1.6rem;
        }
      </style>
    <!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><link rel="alternate" href="/rss2.xml" title="Peter's Blog" type="application/atom+xml">
</head>
  </html>
</html>


<body>
  <div id="app">
    
      
    <main class="content on">
      <section class="outer">
  <article
  id="post-Optics/Optical-Communication"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h1 class="article-title sea-center" style="border-left:0" itemprop="name">
  Optical Communication Notes
</h1>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/Optics/Optical-Communication/" class="article-date">
  <time datetime="2021-04-01T16:58:23.000Z" itemprop="datePublished">2021-04-01</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Notes/">Notes</a> / <a class="article-category-link" href="/categories/Notes/Optics/">Optics</a>
  </div>
  
<div class="word_count">
    <span class="post-time">
        <span class="post-meta-item-icon">
            <i class="ri-quill-pen-line"></i>
            <span class="post-meta-item-text"> Word count:</span>
            <span class="post-count">12.1k</span>
        </span>
    </span>

    <span class="post-time">
        &nbsp; | &nbsp;
        <span class="post-meta-item-icon">
            <i class="ri-book-open-line"></i>
            <span class="post-meta-item-text"> Reading time≈</span>
            <span class="post-count">56 min</span>
        </span>
    </span>
</div>
 
    </div>
      
    <div class="tocbot"></div>




  
    <div class="article-entry" itemprop="articleBody">
       
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><h1 id="光通信技术"><a href="#光通信技术" class="headerlink" title="光通信技术"></a>光通信技术</h1><blockquote>
<p> Imagine yourself a researcher working about thirty years ago. Your project: Find a way to transmit a light signal for communications.</p>
</blockquote>
<span id="more"></span>

<h2 id="1-Fiber-Basics"><a href="#1-Fiber-Basics" class="headerlink" title="1 Fiber Basics"></a>1 Fiber Basics</h2><h3 id="Fiber-Structure"><a href="#Fiber-Structure" class="headerlink" title="Fiber Structure"></a>Fiber Structure</h3><a target="_blank" rel="noopener" href="https://tva1.sinaimg.cn/large/008i3skNly1gs755mzipnj30wt0rsn1z.jpg" title="structure of a step-index fiber" class="gallery-item"><img src="https://tva1.sinaimg.cn/large/008i3skNly1gs755mzipnj30wt0rsn1z.jpg" alt="structure of a step-index fiber" style="zoom: 25%;" /></a>



<h3 id="Important-Angles"><a href="#Important-Angles" class="headerlink" title="Important Angles"></a>Important Angles</h3><a target="_blank" rel="noopener" href="https://tva1.sinaimg.cn/large/008eGmZEly1gp40qylo6wj32fo0rsn1y.jpg" title="schematic of the light incident into a fiber" class="gallery-item"><img src="https://tva1.sinaimg.cn/large/008eGmZEly1gp40qylo6wj32fo0rsn1y.jpg" alt="schematic of the light incident into a fiber" style="zoom: 25%;" /></a>

<ul>
<li>$\alpha_c$: critical propagation angle 传播过程中与光轴的夹角</li>
</ul>
<p>$$<br>\cos\alpha_c&#x3D;\sin\theta_c&#x3D;\frac{n_2}{n_1}<br>$$</p>
<ul>
<li>$2\theta_a$: acceptance angle</li>
</ul>
<p>$$<br>\mathrm{NA}:&#x3D;\sin\theta_a&#x3D;\sqrt{n_1^2-n_2^2}<br>$$</p>
<h3 id="Numerical-Aperture"><a href="#Numerical-Aperture" class="headerlink" title="Numerical Aperture"></a>Numerical Aperture</h3><p>$\mathrm{NA}$: numerical aperture<br>$$<br>\mathrm{NA}&#x3D;n\sqrt{2\Delta},<br>$$<br>where $n&#x3D;(n_1+n_2)&#x2F;2,\Delta&#x3D;(n_1-n_2)&#x2F;n.$</p>
<p>Based on its physical meaning, numerical aperture can be calculated using<br>$$<br>\begin{equation}<br>\begin{split}<br>\mathrm{NA}<br>&#x3D;\sqrt{\frac{P_{in}}{P_{out}}}<br>\end{split}<br>\end{equation}<br>$$<br>for a lambert light source.</p>
<h3 id="Rectangular-waveguide"><a href="#Rectangular-waveguide" class="headerlink" title="Rectangular waveguide"></a>Rectangular waveguide</h3><a target="_blank" rel="noopener" href="https://tva1.sinaimg.cn/large/008eGmZEly1gp42v9uvz0j31i40rs0y4.jpg" title="schematic of a rectangular waveguide" class="gallery-item"><img src="https://tva1.sinaimg.cn/large/008eGmZEly1gp42v9uvz0j31i40rs0y4.jpg" alt="schematic of a rectangular waveguide" style="zoom: 25%;" /></a>
$$
\nabla_{xy}^2\mathbf{E}+h^2\mathbf{E}=0,
$$
with $h$ ( whcih I think can be regarded as *lateral wavenumber*)
$$
h^2=\gamma^2+k^2=\left(\frac{l\pi}{a}\right)^2+\left(\frac{m\pi}{b}\right)^2
$$
where $\gamma=\alpha+j\beta,k=\omega/v,v=1/\sqrt{\epsilon\mu}.$



<ul>
<li><p>cutoff frequence &#x2F; wavelength<br>$$<br>\begin{aligned}<br>\gamma&#x3D;0\implies &amp;f_c&#x3D;\omega_c&#x2F;2\pi&#x3D;\frac{k_c v}{2\pi}&#x3D;\frac{hv}{2\pi}\<br>&amp;\lambda_c&#x3D;v&#x2F;f_c&#x3D;2\pi&#x2F;h<br>\end{aligned}<br>$$</p>
</li>
<li><p>guide wavelength 导波波长<br>$$<br>\lambda_g&#x3D;\frac{2\pi}{\beta}&#x3D;\frac{\lambda}{\sqrt{1-(f&#x2F;f_c)^2}}<br>$$</p>
</li>
<li><p>critical relation<br>$$<br>\begin{aligned}<br>\beta&amp;&#x3D;k\sqrt{1-(f&#x2F;f_c)^2},\<br>\frac{1}{\lambda^2}&amp;&#x3D;\frac{1}{\lambda_g^2}+\frac{1}{\lambda_c^2}.<br>\end{aligned}<br>$$</p>
</li>
<li><p>V值<br>$$<br>V&#x3D;\frac{\pi d}{\lambda}\text{NA},<br>$$<br>其中 $d$ 是芯层直径 (core diameter), $\lambda$ 是真空中波长 (vacuum wavelength).</p>
</li>
<li><p>Number of modes</p>
<p>For a large $V$ number (&gt;20), a step–index fiber approximately has $N&#x3D;V^2&#x2F;2$ modes, a graded–index fiber has $N&#x3D;V^2&#x2F;4$ modes. </p>
</li>
<li><p>有效折射率 (effective refractive index)</p>
<p>For step-index fiber:<br>$$<br>n_{\text{eff}}&#x3D;\frac{c_0}{v_\text{guide}}&#x3D;\frac{c_0}{\omega&#x2F;\beta}&#x3D;\frac{c_0}{k_1c_1&#x2F;(k_1\cos\alpha)}&#x3D;n_1\cos\alpha<br>$$<br>注意 $\alpha$ 是传播角，不同模式的 $\alpha$ 不同，角频率<br>$$<br>\omega&#x3D;kc&#x3D;k_1c_1&#x3D;\frac{2\pi n_1}{\lambda}\frac{c_0}{n_1}<br>$$<br>是不变量。</p>
</li>
</ul>
<h3 id="Modes"><a href="#Modes" class="headerlink" title="Modes"></a>Modes</h3><p>Light entering an optical fiber breaks down into discrete beams (travelling at a seperate propagation angle) called modes, which are stable electromagnetic field patterns existing within the fiber.</p>
<h4 id="Three-Types"><a href="#Three-Types" class="headerlink" title="Three Types"></a>Three Types</h4><ul>
<li><p>Guided mode</p>
<ul>
<li><p>Maxwell方程的解，满足全反射条件，在芯层中传输</p>
</li>
<li><p>导模的传播常数 $\beta$ 范围<br>$$<br>\begin{equation}<br>\begin{split}<br>k&amp;&#x3D;\frac{2\pi n}{\lambda}\<br>\beta_{\max}&amp;&#x3D;k&#x3D;\frac{2\pi n_1}{\lambda}\<br>\beta_{\min}&amp;&#x3D;k\cos\alpha&#x3D;\frac{2\pi n_1}{\lambda}\frac{n_2}{n_1}&#x3D;\frac{2\pi n_2}{\lambda}<br>\end{split}<br>\end{equation}<br>$$</p>
</li>
</ul>
</li>
<li><p>Radiation mode</p>
<ul>
<li>Maxwell方程的解，但不满足全反射条件，在包层中传输</li>
</ul>
</li>
<li><p>Leaky mode</p>
<ul>
<li>不是Maxwell方程的解，传输一定距离就损耗完了</li>
</ul>
</li>
</ul>
<h4 id="Phase-and-group-velocities"><a href="#Phase-and-group-velocities" class="headerlink" title="Phase and group velocities"></a>Phase and group velocities</h4><p>$$<br>\begin{equation}<br>\begin{split}<br>y_1&amp;&#x3D;A\sin(\beta_1 z-\omega_1 t),\ y_2&#x3D;A\sin(\beta_2 z-\omega_2t)<br>\<br>y_1+y_2&amp;&#x3D;2A\sin(\beta_{\text{avg}}x-\omega_{\text{avg}}t)\cdot \cos(\frac{\Delta \beta}{2}x-\frac{\Delta \omega }{2}t)<br>\end{split}<br>\end{equation}<br>$$</p>
<p>$\cos$ 项的频率显然更低，因此成为叠加波的包络，包络速度是群速度<br>$$<br>v_g&#x3D;\frac{\partial \omega}{\partial \beta}<br>$$<br>而相速度是点速度<br>$$<br>v&#x3D;\frac{\text{d}z}{\text{d}t}&#x3D;\frac{\omega}{\beta}.<br>$$</p>
<h4 id="Linear-Polarized-Modes"><a href="#Linear-Polarized-Modes" class="headerlink" title="Linear Polarized Modes"></a>Linear Polarized Modes</h4><ul>
<li>TEM 没有纵向 (z方向) 的场分量，TE有 $H_z$, TM 有 $E_z$, HE的 $H_z&gt;E_z$, EH的 $E_z&gt;H_z$</li>
<li>在弱导近似 (weakly guided-mode approximation) 条件下模式简并得到LP模</li>
<li>$\text{LP}_{lm}$ 中的 $l$ 是 $\varphi$ 方向峰值个数的一半，$m$ 是$r$ 方向</li>
</ul>
<h3 id="Attenuation"><a href="#Attenuation" class="headerlink" title="Attenuation"></a>Attenuation</h3><p>Classification: Bending (macro, micro), Scattering and Aborption </p>
<p>Calculation：<br>$$<br>Loss(\text{dB})&#x3D;10\lg(P_{in}&#x2F;P_{out})<br>$$</p>
<ul>
<li><p>Measurement: cut method（截断法），好处是长光纤和短光纤相减消去了固定的功率计、光纤的接入损耗</p>
</li>
<li><p>Attenuation per fiber length $A$<br>$$<br>A(\text{dB&#x2F;km})&#x3D;loss(\text{dB})&#x2F;L(\text{km})\implies P_{out}&#x3D;P_{in}10^{-AL&#x2F;10}<br>$$</p>
</li>
<li><p>Attenuation constant $\alpha$<br>$$<br>\frac{dP}{dz}&#x3D;-\alpha P\implies P_{out}&#x3D;P_{in}e^{-\alpha L}<br>$$</p>
</li>
<li><p>Relation<br>$$<br>A(\text{dB&#x2F;km})&#x3D;\frac{10}{L}\lg{\left[\frac{P_{in}}{P_{in}\times e^{-\alpha L}}\right]}&#x3D;10\alpha\lg e&#x3D;4.34\alpha\ (\text{1&#x2F;km})<br>$$</p>
</li>
</ul>
<h4 id="Intrinsic"><a href="#Intrinsic" class="headerlink" title="Intrinsic"></a>Intrinsic</h4><p>Material resonances and scattering <strong>introduced from material</strong>.</p>
<a target="_blank" rel="noopener" href="https://tva1.sinaimg.cn/large/008i3skNgy1gs2aqqns15j30ns0k1n0w.jpg" title="IMG_5B43009B05F1-1" class="gallery-item"><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs2aqqns15j30ns0k1n0w.jpg" alt="IMG_5B43009B05F1-1" style="zoom: 67%;" /></a>

<ul>
<li><p>Rayleigh scattering</p>
<ul>
<li><p>from irregular positions of molecules of silicon dioxide which causes variations in refractive index</p>
</li>
<li><p>wavelength depending</p>
</li>
</ul>
</li>
<li><p>intrinsic absorption</p>
<ul>
<li>from oscillation of molecules, atoms, electrons</li>
</ul>
</li>
</ul>
<h4 id="Extrinsic"><a href="#Extrinsic" class="headerlink" title="Extrinsic"></a>Extrinsic</h4><p>Impurity absorption and bending of fiber.</p>
<ul>
<li><p>impurity absorption	</p>
<ul>
<li>from $\text{OH}^{-1}$ , aborption peaks at 2750nm, but since the oscillations are nonlinear, they have subharmonics at 945,1240 and 1380nm</li>
<li><strong>Transparent windows</strong>: 850nm, 1300nm, 1550nm</li>
</ul>
</li>
<li><p>Macro-bending</p>
<ul>
<li>光纤的整体弯曲</li>
<li>The more light power confined within the core, the less sensitive the fiber is with respect to bending</li>
</ul>
</li>
<li><p>Micro-bending</p>
<ul>
<li>光纤的局部弯曲</li>
<li>Microbending results in <strong>transferring power from guided modes to radiation modes</strong></li>
<li>Microbending loss in multimode fiber is practically wavelength indendent 与波长无关</li>
<li><strong>A multimode fiber is less sensitive to microbending than is a singlemode fiber</strong></li>
</ul>
</li>
</ul>
<h3 id="Power-Confinement"><a href="#Power-Confinement" class="headerlink" title="Power Confinement"></a>Power Confinement</h3><ul>
<li><p>The higher the order of the mode, the less the percentage of total power it carries.</p>
</li>
<li><p>$$<br>\frac{P_{\text{clad}}}{P_{\text{core}}}&#x3D;\frac{2\sqrt 2}{3V}<br>$$</p>
</li>
<li><a target="_blank" rel="noopener" href="https://tva1.sinaimg.cn/large/008i3skNgy1gs2marjfcnj30v20rrqag.jpg" title="IMG_B90112102052-1" class="gallery-item"><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs2marjfcnj30v20rrqag.jpg" alt="IMG_B90112102052-1" style="zoom:67%;" /></a></li>
</ul>
<h3 id="Dispersion"><a href="#Dispersion" class="headerlink" title="Dispersion"></a>Dispersion</h3><p><em>Intermodal dispersion</em> : 不同模式走的光程不同造成到达时间不同，导致波形展宽<br>$$<br>\begin{equation}<br>\begin{split}<br>\Delta t_{\text{modal}}&amp;&#x3D;t_c-t_0\<br>&amp;&#x3D;\frac{Ln_1}{\cos\alpha c_0}-\frac{Ln_1}{c_0}\<br>&amp;&#x3D;\frac{Ln_1}{c_0}\left(\frac{n_1-n_2}{n_2}\right)\<br>&amp;\approx\frac{Ln_1}{c_0}\Delta\approx\frac{L}{2n_2c_0}\text{NA}^2<br>\end{split}<br>\end{equation}<br>$$</p>
<p>解决方案：</p>
<ul>
<li>使用渐变折射率光纤（graded–index fiber），由低到高阶模折射率降低，补偿光程</li>
<li>使用单模光纤</li>
</ul>
<p><em>Chromatic Dispersion</em>：If the mode were composed of light comprising different colors (wavelengths) , they will arrive at the receiver end at different time, causing output light pulse to spread, this is chromatic dispersion.  (intramodal)<br>$$<br>\begin{equation}<br>\begin{split}<br>\Delta_{\text{chrom}}&amp;&#x3D;D(\lambda)L\Delta\lambda,\<br>D(\lambda)&amp;&#x3D;\frac{\text{d}\tau_g}{\text{d}\lambda}&#x3D;\frac{\text{d}(1&#x2F;v_g)}{\text{d}\lambda}&#x3D;-\frac{\lambda}{c}\frac{\partial^2 n}{\partial^2\lambda}<br>\&amp;&#x3D;\frac{S_0}{4}\left(\lambda-\frac{\lambda_0^4}{\lambda^3}\right),<br>\end{split}<br>\end{equation}<br>$$<br>公式中 $\lambda_0$ 是零色散波长，$\lambda$ 是工作波长，$S_0$ 是 $\lambda_0$ 处的色散斜率。</p>
<p><em>total dispersion</em>：pulse spreading during transmission along the fiber si called dispersion.<br>$$<br>\Delta_{\text{total}}&#x3D;\sqrt{\Delta t_{\text{modal}}^2+\Delta t_{\text{chrom}}^2}<br>$$</p>
<h3 id="Bit-rate-and-Bandwidth"><a href="#Bit-rate-and-Bandwidth" class="headerlink" title="Bit rate and Bandwidth"></a>Bit rate and Bandwidth</h3><p>工程中对BW的要求：<br>$$<br>\begin{equation}<br>\begin{split}<br>BW&amp;&lt;\frac{1}{4\Delta t_{\text{total}}},<br>\end{split}<br>\end{equation}<br>$$<br>BW 是带宽，表示光纤支持的一定频率内的脉冲，一个脉冲可以看成1个bit，因此就有 BW&#x3D;BR（比特率），但有时候101010这样的比特序列会导致10只有一个脉冲，因此频率减半，这时 BW&#x3D;BR&#x2F;2。</p>
<h4 id="光带宽与电带宽"><a href="#光带宽与电带宽" class="headerlink" title="光带宽与电带宽"></a>光带宽与电带宽</h4><p>$$<br>\Delta f_{光}&#x3D;\sqrt{2}\Delta f_{电}<br>$$</p>
<p><a target="_blank" rel="noopener" href="https://tva1.sinaimg.cn/large/008i3skNgy1gs2erxuxn5j31060rc1ky.jpg" title="image-20210702104408537" class="gallery-item"><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs2erxuxn5j31060rc1ky.jpg" alt="image-20210702104408537"></a></p>
<p>电的半高全宽要求光的0.707高全宽。</p>
<p>推导：<a target="_blank" rel="noopener" href="https://blog.csdn.net/zhanghaijun2013/article/details/106627166/">功率带宽积是常数</a>：<br>$$<br>BW\times P_{光}&#x3D;\text{Const}<br>$$<br>光带宽对应最大光功率的一半：<br>$$<br>\Delta f_{光}\times \frac{1}{2}P_{光}&#x3D;\text{C}<br>$$<br>电带宽对应最大电功率的一半，最大光功率的 $\sqrt{2}&#x2F;2$：<br>$$<br>\Delta f_{电}\times\frac{\sqrt{2}}{2}P_{光}&#x3D;\text{C}<br>$$<br>于是：<br>$$<br>\Delta f_{光}&#x3D;\sqrt{2}\Delta f_{电.}<br>$$</p>
<h4 id="Bandwidth–Length-product-limit"><a href="#Bandwidth–Length-product-limit" class="headerlink" title="Bandwidth–Length product limit"></a>Bandwidth–Length product limit</h4><p>$$<br>(BR\times L)_{\max}&#x3D;\frac{1}{4\sigma_\lambda D(\lambda)}.<br>$$</p>
<p>光纤长度越长，由于损耗，BR会越小，反之则反，因此衡量一个光纤的传输能力要用 BR 和长度的积。</p>
<h3 id="课堂提问"><a href="#课堂提问" class="headerlink" title="课堂提问"></a>课堂提问</h3><p>工作原理，损耗</p>
<ol>
<li><p>光纤是如何工作的？</p>
<p>光纤是由内层和外层两层结构组成的，内层(core)折射率 $n_1$ 大于外层(cladding, 包层) $n_2$,  光在其中发生全内反射，被限制在内进行传播。</p>
</li>
<li><p>什么叫接收角？</p>
<p>经过折射，在光纤中传播角小于临界传播角对应的入射角所夹的范围。</p>
</li>
<li><p>什么是数值孔径？物理意义是什么？</p>
<p>数值孔径是接受角的一半的正弦值。数值孔径表征光纤端面接收光的能力。数值孔径对应的接收角范围内的光才能被光纤接收、在光纤中传播。</p>
</li>
<li><p>损耗分为几种？</p>
<p>弯曲损耗、吸收损耗、散射损耗。</p>
<p>吸收损耗包括材料的本征吸收和非纯吸收。</p>
</li>
<li><p>非纯吸收最主要的是 $OH^{-}$ 造成的吸收，由于此吸收的存在，主要通信窗口分成了三个，是哪三个？</p>
<p>850 nm、1300 nm 、1550 nm </p>
</li>
<li><p>什么叫模式？</p>
<p>只有特定的离散角度才能在波导中稳定传播，每一个离散的角度叫一个模式。</p>
</li>
<li><p>什么叫模式色散？</p>
<p>不同模式的光在光纤中传播的光程不同导致相同时间内它们在光纤中传播到不同的位置，从而导致光脉冲的展宽，这种展宽叫做模式色散（模间色散）。</p>
</li>
<li><p>模式内部还有什么色散？</p>
<p>模式内部的色散叫色度色散，是指由不同波长的光传播速度不同造成的脉冲展宽。</p>
</li>
<li><p>这些色散如何影响光信号在链路里的传输速率？</p>
<p>色散造成脉冲展宽  $\Delta t$, 脉冲展宽影响带宽和比特率 $BW,BR$.</p>
</li>
</ol>
<h2 id="2-Single-Mode-Fiber"><a href="#2-Single-Mode-Fiber" class="headerlink" title="2 Single Mode Fiber"></a>2 Single Mode Fiber</h2><h3 id="单模条件"><a href="#单模条件" class="headerlink" title="单模条件"></a>单模条件</h3><p>$$<br>V&lt;2.405<br>$$</p>
<h3 id="模场直径"><a href="#模场直径" class="headerlink" title="模场直径"></a>模场直径</h3><p>Manufacturers use the Mode-Field Diameter, MFD, (模场直径) ,rather than the core diameter as a parameter that describes single mode fibers. 麦克斯韦方程解出来是贝塞尔函数 $J(z)$, 为了方便用高斯函数去拟合：<br>$$<br>I(r)&#x3D;I_0\exp(-\frac{2r^2}{w_0^2})<br>$$<br>光强为最大光强的 $e^{-2}$ 时对应的直径为模场直径：<br>$$<br>MFD&#x3D;2w_0<br>$$</p>
<h3 id="截止波长与有效截止波长"><a href="#截止波长与有效截止波长" class="headerlink" title="截止波长与有效截止波长"></a>截止波长与有效截止波长</h3><ul>
<li><p>cutoff wavelength</p>
<p>波长越小，V值越大，小到 $\lambda_c$ 不满足单模条件了，$\lambda_c$ 就是截止波长。</p>
</li>
<li><p>model noise</p>
<p>截止波长附近 $LP_{11}$ 模式的功率非常高，对光纤的工作造成影响</p>
</li>
<li><p>effective cutoff wavelength</p>
<p>The wavelength at which $LP_{11}$ experiences 19.3 dB more attenuation than the fundamental mode $LP_{01}$.</p>
<ul>
<li>the effective cutoff wavelength of cabled fiber is shorter than that of uncabled fiber</li>
</ul>
</li>
</ul>
<h3 id="Attenuation-1"><a href="#Attenuation-1" class="headerlink" title="Attenuation"></a>Attenuation</h3><ul>
<li><p>Macrobending loss in SMF increases as operating wavelength increases and bend radius decreases </p>
<a target="_blank" rel="noopener" href="https://tva1.sinaimg.cn/large/008i3skNly1gs3j7fctrcj30m50qcgp1.jpg" title="image-20210703100308792" class="gallery-item"><img src="https://tva1.sinaimg.cn/large/008i3skNly1gs3j7fctrcj30m50qcgp1.jpg" alt="image-20210703100308792" style="zoom:33%;" /></a>
</li>
<li><p>Microbending loss in SMF is also wavelength dependent. The reason is also the MFD’s increase with a longer $\lambda$, making more power radiate outside the core.</p>
</li>
<li><p>SMF has less absortion loss than multimode fiber, because the light goes through the SMF is less and thus less chance for absorption and scattering events to occur.</p>
</li>
</ul>
<h3 id="Dispersion-1"><a href="#Dispersion-1" class="headerlink" title="Dispersion"></a>Dispersion</h3><ul>
<li><p>SMF does not have modal dispersion.</p>
</li>
<li><p>SMF中的色散按大类可分为色度色散和偏振模色散</p>
</li>
<li><p>Chromatic dispersion</p>
<ul>
<li><p>Material dispersion</p>
<p>Material dispersion is a delay-time dispersion caused by the fact that the refractive index of the glass material changes in accordance with the change of the signal frequency. 材料色散是由于材料的折射率随波长变化 $n&#x3D;n(\lambda)$。</p>
</li>
<li><p>Waveguide dispersion</p>
<p>The pulse spread because light is confined within a structure having different refractive indexes: after entering a single mode fiber, an information-carrying light pulse is distributed between the core and the cladding. (<strong>different speed when propagating between core and cladding</strong>) 波导色散是由于光在core和cladding中的传播速度不同。</p>
</li>
</ul>
</li>
<li><p>Polarization-mode dispersion (PMD) 偏振模色散</p>
<a target="_blank" rel="noopener" href="https://tva1.sinaimg.cn/large/008i3skNly1gs3j0kpzczj30ps0hvwh8.jpg" title="IMG_01E886504B59-1" class="gallery-item"><img src="https://tva1.sinaimg.cn/large/008i3skNly1gs3j0kpzczj30ps0hvwh8.jpg" alt="IMG_01E886504B59-1" style="zoom: 50%;" /></a>

<ul>
<li><p>Two orthogonal linear-polarized modes, $HE_{11}$ which we see as one $LP_{01}$ mode, travel along a singlemode fiber at different velocities because of the fiber’s birefringence. This results in the form of pulse spread called polarization-mode dispersion, PMD. Note that PMD does not depend on operation wavelength. 偏振膜色散来自两个偏振模式 $TE$ 和 $TM$ 在传播过程中感受到的折射率不同，分别为 $n_x,n_y$，复习一下物理光学的双折射部分</p>
</li>
<li><p>Beat length $l_p$ 拍长，描述PMD可以用拍长，就是两个偏振相位差达到 $2\pi$ 的距离（一个周期）</p>
<p>Beat length is the length over which the phase difference between x- and y- polarized waves changes by $2\pi$:<br>$$<br>\beta&#x3D;\frac{2\pi}{\lambda}(n_x-n_y)\implies l_p&#x3D;\frac{2\pi}{\beta}&#x3D;\frac{\lambda}{B.}<br>$$</p>
</li>
<li><p>PMD与波长无关、与根号下光纤长度成正比<br>  $$<br>  \Delta t_{\text{PMD}}&#x3D;D_{\text{PMD}}\sqrt{L}<br>  $$</p>
</li>
</ul>
</li>
<li><p>Extinction Ratio (ER) 消光比<br>  $$<br>  ER(\text{dB})&#x3D;-10\log \frac{P_\perp}{P_\parallel},<br>  $$<br>  where $P_\perp$ and $P_\parallel$ are light power in unexcited and excited modes, respectively. $P_\perp$ 是 $P_\parallel$ 耦合进入另一个偏振态的功率，会造成信号的衰减。</p>
<ul>
<li>$h$ Parameter</li>
</ul>
</li>
</ul>
<p>$$<br>    h(m^{-1}):&#x3D;\frac{1}{L}\frac{P_\perp}{P_\parallel}\<br>$$</p>
<ul>
<li>polarization cross talk (PCT)</li>
</ul>
<p>$$<br>    PCT(\text{dB}):&#x3D;10\log\frac{P_\perp}{P_\parallel}&#x3D;10\log hL.<br>$$</p>
<ul>
<li><p>Management:</p>
<ul>
<li><p>Dispersion-Compensating Fiber (DCF) 色散补偿光纤</p>
<ul>
<li>To shift the minimum dispersion, designers can control <strong>mode-field distribution</strong> by changing the profiles of the core and cladding.改变折射率分布，造出来负色散常数的光纤</li>
</ul>
</li>
<li><p>Dispersion-Compensating Gratings (DCG) 色散补偿光栅</p>
<a target="_blank" rel="noopener" href="https://tva1.sinaimg.cn/large/008i3skNly1gs7gzaa2qpj30ty0b1wgo.jpg" title="image-20210703094953340" class="gallery-item"><img src="https://tva1.sinaimg.cn/large/008i3skNly1gs7gzaa2qpj30ty0b1wgo.jpg" alt="image-20210703094953340" style="zoom: 67%;" /></a>

<ul>
<li><p>Fiber Bragg gratings (FBG) 光纤布拉格光栅</p>
<p>利用光栅的选频，把光栅不同长度的周期调得不一样（啁啾），可以选出不同频率，这样不同频率的光出射时的光程不一样，就达到了色散控制（补偿）的效果</p>
</li>
</ul>
</li>
<li><p>DCF compensates over a wide range of wavelengths, while a FBG is more suitable for a very narrow band of wavelengths.</p>
</li>
</ul>
</li>
<li><p>Polarization–Maintaining Fiber 保偏光纤</p>
<ul>
<li><p>Hi-Bi 高双折射率 $B$</p>
</li>
<li><p>大的 $B$ 可以限制偏振模式耦合到另一个偏振态，增大消光比</p>
</li>
<li><p>大的 $B$ 使得拍长 $l_p$ 较小，光程差周期可控 (mm两级)，普通光纤的 $l_p$ 是 m 量级</p>
</li>
</ul>
</li>
</ul>
<h3 id="Non-linear-effect"><a href="#Non-linear-effect" class="headerlink" title="Non-linear effect"></a>Non-linear effect</h3><ul>
<li><p>参量过程（能量在光之间转换）</p>
<ul>
<li>Self-Phase Modulation (SPM)<br>$$<br>\Phi&#x3D;\int_0^L(\beta-\beta’) \text dz&#x3D;\int_0^L\gamma P(z)\text dz&#x3D;\gamma P_{in}’L_{\text{eff}},\ P_{in}&#x3D;n_2E^2<br>$$</li>
</ul>
</li>
<li><p>Cross-Phase Modulatoin (XPM)<br>  $$<br>  \Phi_1&#x3D;\gamma L_{\text{eff}}(P_1+2P_2+2P_3),\quad \text{for a 3 channel transmission.}<br>  $$</p>
<ul>
<li>Four-Wave Mixing (FWM)</li>
</ul>
</li>
<li><p>非参量过程: Stimulated Scatterning</p>
<ul>
<li><p>Stimulated scattering is transferring energy from the incident wave to another, scattered wave at lower frequency (longer wavelength) with the small energy difference being realeased in the form of phonons.</p>
</li>
<li><p>The incident wave can be seen as a kind of pump wave. Scattered waves are called <em>Stokes’ waves</em> (斯托克斯光) .</p>
</li>
<li><p>Stimulated Raman Scattering (SRS)</p>
<ul>
<li>SRS becomes an issue for WDM systems ( has wide SRS bandwidth $\sim$ THz so many channels can be coupled with)</li>
<li>SRS scattered light moves mostly <em>forward</em> and the phonons associated with this process are optical ones</li>
</ul>
</li>
<li><p>Stimulated Brillouin Scattering (SBS)</p>
<ul>
<li>SBS is a problem for a single-channel system (SBS bandwidth is very narrow)</li>
<li>SBS scattered light moves <em>backward</em> and the phonons associated with it are acoustic</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="课堂提问1"><a href="#课堂提问1" class="headerlink" title="课堂提问1"></a>课堂提问1</h3><ol>
<li><p>单模光纤是怎么实现的？</p>
<p>减小V值到 &lt;2.405 —&gt; $V&#x3D;\displaystyle\frac{\pi d}{\lambda} \text{NA}$ —&gt; 增大工作波长、减小光纤直径、减小数值孔径</p>
</li>
<li><p>单模光纤中，一般不用芯层直径，而用什么？</p>
<p>模场直径。为将光束的横向分布从贝塞尔分布近似为高斯分布后的两倍束腰半径&#x2F;模场半径 $2w_0$.</p>
</li>
<li><p>光纤中的截止波长和有效截止波长分别是什么？</p>
<p>截止波长是 $LP_{11}$ 模截止的波长，大于截止波长的光纤是单模光纤。</p>
<p>有效截止波长的提出是从功率损耗的角度解决截止波长对附近的波长是否工作在单模模式界定不清的问题。有效截止波长是 $LP_{11}$ 模比 $LP_{01}$ 模损耗功率多 $19.3 \text{ dB}$ 时的光纤工作波长。不同种类、不同长度的光纤有效截止波长不一样。</p>
</li>
<li><p>弯曲损耗和波长之间是什么关系？</p>
<p>波长影响V值，工作波长小V值大，能量限制在芯层的多，相同程度的弯曲下损耗小。波长越长，弯曲损耗越严重。</p>
</li>
<li><p>色散位移光纤、色散补偿光纤、色散平坦光纤等相同的设计思路是什么？</p>
<p>调节总色散 —&gt; 材料色散可以通过掺杂改变，但是变化范围小；可以入手的地方在于<em>波导色散</em>  —&gt; 波导色散是光被约束在光纤中形成的，因此去改变光场在芯层包层中的能量分布 —&gt; 这由V值&#x2F;模场分布决定 —&gt; 去改变折射率分布</p>
</li>
</ol>
<h3 id="课堂提问2"><a href="#课堂提问2" class="headerlink" title="课堂提问2"></a>课堂提问2</h3><ol>
<li><p>色散补偿有哪几种主要方式？</p>
<p>使用色散补偿光纤或者色散补偿光栅。</p>
</li>
<li><p>色散补偿光纤是怎么设计的？考虑什么因素？</p>
<p>一要提升色散常数，二要减小损耗。</p>
</li>
<li><p>偏振模色散是怎么产生的？</p>
<p>基模$LP_{01}$由包括两个自然模式，这两个模式的偏振方向互相垂直，<strong>由于光纤不是理想的圆柱形</strong>，在光纤的两个垂直方向上传播的光由于双折射存在折射率差，因此传播速度不同，造成展宽。</p>
</li>
<li><p>偏振膜色散的特点？</p>
<p>时间延迟与长度成根号关系，色散常数与频率（工作波长）没有相关性</p>
</li>
<li><p>自相位调制 (SPM) 的成因？</p>
<p>简单地说是折射率的二阶非线性效应：<br>$$<br>n&#x3D;n_0+n_2|E(\omega,t)|^2.<br>$$<br>进一步，由于光场振幅随着时间变化，折射率也与时间有关了，由此推出：<br>$$<br>E(\vec r,t)\sim e^{-i(\omega t-\beta z-\gamma P_0\varphi_{NL}\cdot L)}<br>$$<br>可得受到自身电场调制后的频率<br>$$<br>\omega’&#x3D;\omega-\gamma\varphi_{NL}L\cdot\frac{d P_0}{dt}.<br>$$<br>于是光的频率与入射光功率有关，产生 <em>啁啾</em> ，即不同时间的频率不同。</p>
<a target="_blank" rel="noopener" href="https://tva1.sinaimg.cn/large/008i3skNly1gpslz1k1yyj30no0dujs5.jpg" title="image-20210422163658785" class="gallery-item"><img src="https://tva1.sinaimg.cn/large/008i3skNly1gpslz1k1yyj30no0dujs5.jpg" alt="image-20210422163658785" style="zoom:33%;" /></a></li>
</ol>
<h4 id="Question"><a href="#Question" class="headerlink" title="Question"></a>Question</h4><ol>
<li><p>为什么cabled fiber弯曲损耗更大？</p>
</li>
<li><p>Depressed clading index profile 的作用和原理？</p>
<p>增加折射率差来提高单模光纤的V值，提高抗弯能力。在光功率小到一定程度的半径处停止重掺杂减少材料消耗。</p>
</li>
</ol>
<h2 id="3-Fabrication-and-Connectorization"><a href="#3-Fabrication-and-Connectorization" class="headerlink" title="3 Fabrication and Connectorization"></a>3 Fabrication and Connectorization</h2><h3 id="Fabrication"><a href="#Fabrication" class="headerlink" title="Fabrication"></a>Fabrication</h3><p>流程：制造预制棒和拉预制棒</p>
<ul>
<li><p>preform production </p>
</li>
<li><p>drawing the preform</p>
</li>
</ul>
<h3 id="Cable"><a href="#Cable" class="headerlink" title="Cable"></a>Cable</h3><p>Fiber-optic cable is the protective enclosure surrounding a bare fiber.</p>
<h3 id="Splicing"><a href="#Splicing" class="headerlink" title="Splicing"></a>Splicing</h3><ul>
<li>Splicing（接合）：splicing is the permanent connection of two pieces of optical fiber.</li>
<li>Methods: mechanical splicing and fusion splicing</li>
</ul>
<h4 id="Connection-losses"><a href="#Connection-losses" class="headerlink" title="Connection losses"></a>Connection losses</h4><ul>
<li><p>Intrinsic loss:  </p>
<ul>
<li>无法通过提升接合技术解决的损失</li>
<li>core-diameter mismatch</li>
<li>NA mismatch</li>
<li>MFD mismatch, formula of MFD loss is closer to reality</li>
</ul>
</li>
<li><p>MFD loss: If two fibers have different mode-field diameters, one will have extra insertion loss<br>$$<br>Loss_ {\mathrm { MFD } } ( \mathrm { dB } ) &#x3D; - 10 \log \left[ 4 &#x2F; \left( \mathrm { MFD } _ { 1 } &#x2F; \mathrm { MFD } _ { 2 } + \mathrm { MFD } _ { 2 } &#x2F; \mathrm { MFD } _ { 1 } \right) ^ { 2 } \right]<br>$$<br><em>e.g.</em> To decrease the splicing loss, the interim fiber is inserted between the conventional and the DCF fibers. (<em>MFD of a regular SMF is 10.5</em>m<em>m; MFD of a DCF is 4.7</em> m<em>m</em>)</p>
</li>
<li><p>Extrinsic loss</p>
<ul>
<li>由接合时的瑕疵造成，理论上可消除</li>
<li>lateral misalignment</li>
<li>angular misalignment</li>
<li>end separation</li>
</ul>
</li>
<li><p>Reflection loss</p>
<p>- </p>
<p>$$<br>\begin{equation}<br>\begin{split}<br>R&#x3D;\frac{P_{\text{refl}}}{P_\text{in}}&amp;&#x3D;\left(\frac{n_1-n_2}{n_1+n_2}\right)^2,\<br>RL(\text{dB})&amp;&#x3D;-10\log R<br>\end{split}<br>\end{equation}<br>$$</p>
<a target="_blank" rel="noopener" href="https://tva1.sinaimg.cn/large/008i3skNly1gq7ikumtsxj30r808edjp.jpg" title="image-20210505140257640" class="gallery-item"><img src="https://tva1.sinaimg.cn/large/008i3skNly1gq7ikumtsxj30r808edjp.jpg" alt="image-20210505140257640" style="zoom:50%;" /></a>



<ul>
<li>Reflection loss for 2 interfaces， <em>Fresnel loss</em>:</li>
</ul>
<p>$$<br>\begin{equation}<br>\begin{split}<br>R&amp;&#x3D;R_1+R_2-2\sqrt{R_1R_2}\cos\left(4\pi z&#x2F;\lambda\right),\<br>Loss_{\text{Fresnel}}&amp;&#x3D;10\lg\frac{P_{\text{in}}}{P_{\text{out}}}&#x3D;-10\lg(1-R)<br>\end{split}<br>\end{equation}<br>$$</p>
<p>​				折回的光与前进的光发生干涉造成相消等。</p>
<p>​				注：$R_1,R_2$ 分别是Air gap的两个内表面反射率</p>
</li>
</ul>
<h3 id="Connectors-不考"><a href="#Connectors-不考" class="headerlink" title="Connectors  (不考)"></a>Connectors  (不考)</h3><h4 id="端面：PC、APC、UPC"><a href="#端面：PC、APC、UPC" class="headerlink" title="端面：PC、APC、UPC"></a><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/89664168">端面：PC、APC、UPC</a></h4><p>为了让两根光纤的端面能够更好的接触，插芯端面通常被研磨成不同结构。PC、APC、UPC代表了陶瓷插芯的前端面结构。PC 是Physical Contact，物理接触。PC是微球面研磨抛光，插芯表面研磨成轻微球面，光纤纤芯位于弯曲最高点，这样两个光纤端面达到物理接触。APC (Angled Physical Contact) 称为斜面物理接触，光纤端面通常研磨成8°斜面。8°角斜面让光纤端面更紧密，并且将光通过其斜面角度反射到包层而不是直接返回到光源处， 提供了更好的连接性能。UPC (Ultra Physical Contact)，超物理端面。UPC是在PC的基础上更加优化了端面抛光和表面光洁度，端面看起来更加呈圆顶状。连接器连接需要以相同的端面结构，例如APC和UPC不能组合在一起，会导致连接器性能下降。</p>
<a target="_blank" rel="noopener" href="https://tva1.sinaimg.cn/large/008i3skNly1gq7j3u0o5bj30pm0faabc.jpg" title="image-20210505142117413" class="gallery-item"><img src="https://tva1.sinaimg.cn/large/008i3skNly1gq7j3u0o5bj30pm0faabc.jpg" alt="image-20210505142117413" style="zoom:33%;" /></a>

<h4 id="类型"><a href="#类型" class="headerlink" title="类型"></a>类型</h4><ul>
<li><p>FC: Fixed Connector 固定连接器</p>
<a target="_blank" rel="noopener" href="https://tva1.sinaimg.cn/large/008i3skNly1gq7ir32ahhj30ak07ywiy.jpg" title="image-20210505140902501" class="gallery-item"><img src="https://tva1.sinaimg.cn/large/008i3skNly1gq7ir32ahhj30ak07ywiy.jpg" alt="image-20210505140902501" style="zoom:50%;" /></a>

<p>FC连接器是带有螺纹主体的光纤连接器，专为在高振动环境中使用而设计。它通常与单模光纤和保偏光纤一起使用。它们正变得越来越少见，被SC和LC连接器所取代。</p>
</li>
<li><p>SC: Subscriber Connector 用户连接器</p>
<a target="_blank" rel="noopener" href="https://tva1.sinaimg.cn/large/008i3skNly1gq7itnlsu1j30ek0cgaby.jpg" title="image-20210505141130662" class="gallery-item"><img src="https://tva1.sinaimg.cn/large/008i3skNly1gq7itnlsu1j30ek0cgaby.jpg" alt="image-20210505141130662" style="zoom: 33%;" /></a>

<p>方形外壳。</p>
</li>
<li><p>ST：Straight Tip 直通式连接器</p>
<a target="_blank" rel="noopener" href="https://tva1.sinaimg.cn/large/008i3skNly1gq7ixifzn6j30ea0cs40o.jpg" title="image-20210505141513334" class="gallery-item"><img src="https://tva1.sinaimg.cn/large/008i3skNly1gq7ixifzn6j30ea0cs40o.jpg" alt="image-20210505141513334" style="zoom: 33%;" /></a>
</li>
<li><p>LC: Lucent Connector</p>
<a target="_blank" rel="noopener" href="https://tva1.sinaimg.cn/large/008i3skNly1gq7iz2hpssj30fq0bwjt6.jpg" title="image-20210505141643359" class="gallery-item"><img src="https://tva1.sinaimg.cn/large/008i3skNly1gq7iz2hpssj30fq0bwjt6.jpg" alt="image-20210505141643359" style="zoom:33%;" /></a>

<p>外观尺寸仅为SC&#x2F;FC的一半。</p>
</li>
</ul>
<h3 id="Local-Area-Network"><a href="#Local-Area-Network" class="headerlink" title="Local Area Network"></a>Local Area Network</h3><ul>
<li><p>Power Budget 功率预算 「考计算」</p>
<p>注：dBm相减相当于两个功率相除，结果是dB单位<br>$$<br>P(\text{dBm})&#x3D;10\lg\left[\frac{P(\text{mW})}{1\ \text{mW}}\right]<br>$$</p>
</li>
<li><p>做题思路：都转化到上升时间</p>
<ul>
<li><p>from electric bandwidth</p>
<p>$$<br>\tau_{\text{mod-rise}}&#x3D;0.35&#x2F;BW_{el}<br>$$</p>
</li>
<li><p>from optical bandwidth</p>
</li>
</ul>
<p>$$<br>BW_{el}&#x3D;0.707 \ BW_{opt}<br>$$</p>
<p>​				题目给的模间色散 $BW_{\text{modal}}\sim \text{MHz}\cdot\text{km}$ 除以长度后得到的是光带宽，需要乘0.707转化到电带宽</p>
<ul>
<li>Rise-time budget equation</li>
</ul>
<p>$$<br>\tau_{sys-rise}&#x3D;\sqrt{\tau_{fib-rise}^2+\tau_{ltw-rise}^2}<br>$$<br>​			   其中 $\tau_{ltw-rise}$ 为 lightwave equipment 的上升时间 （应该是光电器件造成的延时）。</p>
<ul>
<li>Fiber rise time<br>$$<br>\tau_{fib-rise}&#x3D;\sqrt{\tau_{mod-rise}^2+\tau_{chrom-rise}^2},<br>$$<br>where $\tau_{mod-rise}&#x3D;\Delta t_{\text{modal}}$ and $\tau_{chrom-rise}&#x3D;\Delta t_{\text{chrom}}$ are pulse spreads caused by modal and chromatic dispersion, respectively.</li>
</ul>
</li>
<li><p>Bit rate</p>
<ul>
<li><p>Acceptable bit rate with spread time:<br>$$<br>BR&lt;\frac{1}{4\Delta t}<br>$$</p>
</li>
<li><p>$BR&#x3D;BW$ or $BR&#x3D;BW&#x2F;2$ , depending on line code (RZ&#x2F;NRZ) ？</p>
</li>
</ul>
</li>
</ul>
<h2 id="4-Transmitters"><a href="#4-Transmitters" class="headerlink" title="4 Transmitters"></a>4 Transmitters</h2><h3 id="Light-Emitting-Diode"><a href="#Light-Emitting-Diode" class="headerlink" title="Light Emitting Diode"></a>Light Emitting Diode</h3><h4 id="working-principle"><a href="#working-principle" class="headerlink" title="working principle"></a>working principle</h4><p>考虑一个原子核–电子的模型，电子处在分立的轨道，不同轨道的电子有着不同的能量。最外层电子（价电子）决定着材料的性质。把一块材料的所有原子中的电子按能量统计一下，就得到了一个电子的能量分布。有的轨道能量挨得很近，就把它们整合成能级。</p>
<p>半导体的导带和价带之间有个能级间隔 $E_g,$ 它决定着发射电磁波的频率&#x2F;波长。有的半导体中价电子多，那么它的费米能级（0K时电子有无占据的分界线）就偏上，为 n型半导体；有的半导体空穴多，即留给电子来填的位置多，为 p型半导体（e.g. 在纯硅中掺入微量3价元素铟或铝，由于铟或铝原子周围有3个价电子，与周围4价硅原子组成共价结合时缺少一个电子，形成一个空穴）。</p>
<p>高能量的自由电子和空穴相遇时（可以想像成一个正离子和一个负离子相遇），就会发生“电子空穴对复合”，由于多出来的能量以光子形式辐射出来，这就是自发辐射 (radiative); 有的材料比如电二极管，多出来的能量以热的形式释放，为 non-radiative. </p>
<p>现在考虑一个P-N结，就是一块P型半导体和一块N型半导体物理接触，合在一起，接触部分形成的一段耗尽层(depletion region). 耗尽层的形成是由于N型半导体电子浓度大，往P型半导体漂移运动，一运动N型这边就多了空穴，达到稳定时形成一个边界，其电势能阻止着电子进一步扩散。</p>
<a target="_blank" rel="noopener" href="https://tva1.sinaimg.cn/large/008i3skNly1gs4o6ql3utj30ei0ekjtv.jpg" title="IMG_E8D8455946B7-1" class="gallery-item"><img src="https://tva1.sinaimg.cn/large/008i3skNly1gs4o6ql3utj30ei0ekjtv.jpg" alt="IMG_E8D8455946B7-1" style="zoom:67%;" /></a>

<p>如果给这P型半导体一个正向偏压，就降低了耗尽层的势垒，可以把N型半导体的电子往P型拉，把P型半导体的空穴往N型拉，两者在depletion region复合，这样就有发光的机会了！</p>
<a target="_blank" rel="noopener" href="https://tva1.sinaimg.cn/large/008i3skNly1gs4o8pyx00j30h40ecac8.jpg" title="image-20210704094257986" class="gallery-item"><img src="https://tva1.sinaimg.cn/large/008i3skNly1gs4o8pyx00j30h40ecac8.jpg" alt="image-20210704094257986" style="zoom:67%;" /></a>

<p>如上图，正向偏压使得电子和空穴在depletion region复合发光，然后电子（阴离子）往正极、空穴往负极（阳离子）走，在电源处电动势把它们搬过电源继续循环，就可以不断发光了。</p>
<p>LED导带上的电子是外电场做功激发的，LD也是，只是LD需要更多的导带电子（粒子数反转），这是通过高密度的电流(high–density forward current) 实现的。</p>
<h4 id="homostructure-and-heterostructure"><a href="#homostructure-and-heterostructure" class="headerlink" title="homostructure and heterostructure"></a>homostructure and heterostructure</h4><p>在同一个衬底上进行半导体n型和p型掺杂得到的PN结是同质结(homostructure),这种结不能有效限制电子和空穴复合的位置，因此发光的位置比较多，光的方向性不好、效率不高；于是人们发展了异质结。</p>
<a target="_blank" rel="noopener" href="https://tva1.sinaimg.cn/large/008i3skNly1gs4opv6l2oj30rs0up47t.jpg" title="IMG_EEDCA0A4C371-1" class="gallery-item"><img src="https://tva1.sinaimg.cn/large/008i3skNly1gs4opv6l2oj30rs0up47t.jpg" alt="IMG_EEDCA0A4C371-1" style="zoom: 50%;" /></a>

<p>异质结</p>
<ul>
<li>通过控制两边半导体的导带能量和价带能量使得电子和空穴仅能在中间的GaAs区域发生复合（可以移动到两边，但是无法复合？），从而限制发光区域</li>
<li>通过中间和两边的折射率差限制发光的方向（类似光纤&#x2F;波导）。(highly restricted active region and the conduction of radiated light in one direction)</li>
</ul>
<h4 id="surface-and-edge-emitting-LEDs"><a href="#surface-and-edge-emitting-LEDs" class="headerlink" title="surface and edge emitting LEDs"></a>surface and edge emitting LEDs</h4><p>LED分为面发光 (SLED) 和边发光 (ELED), SLED 发出的光可以用朗伯光源建模，更适合耦合多模光纤，ELED则更适合耦合单模光纤。</p>
<ul>
<li><p>coupling into a fiber</p>
<p>当SLED发的光耦合进光纤时，进入的功率可按如下式子估算：<br>$$<br>P_{in}&#x3D;P_0\cdot \text{NA}^2<br>$$</p>
</li>
</ul>
<h4 id="properties"><a href="#properties" class="headerlink" title="properties"></a>properties</h4><ul>
<li><p>光谱带宽一般大于 20nm, 这是由于电子导带和价带都是能带，电子从导带到价带降低到能量有些差别，造成光谱展宽</p>
</li>
<li><p>调制带宽较小（MHZ级），电子空穴的复合发光所用时间较长（modulation bandwidth is limited by the recombination lifetime of the lifetime of the charge carriers)</p>
</li>
<li><p><em>power–bandwidth product</em><br>$$<br>BW\times P&#x3D;\text{constant}<br>$$<br>其中 BW是 modulation bandwidth.</p>
</li>
<li><p>LED发出的光子是没有相关性的，光为非相干光</p>
</li>
</ul>
<h3 id="Laser-Diode"><a href="#Laser-Diode" class="headerlink" title="Laser Diode"></a>Laser Diode</h3><h4 id="working-principle-1"><a href="#working-principle-1" class="headerlink" title="working principle"></a>working principle</h4><p>LD发光原理是受激辐射，和激光的原理类似，LD发光需要三个条件</p>
<ul>
<li>population inversion<ul>
<li>提供高电流密度电流 ($I&gt;I_{th}$，active region厚度很小，0.1 $\mu$m量级，利用异质结等去限制 )</li>
</ul>
</li>
<li>stimulated emission <ul>
<li>提供增益介质，LD中为PN结</li>
</ul>
</li>
<li>positive feedbacck <ul>
<li>两边高折射率材料作为反射镜</li>
</ul>
</li>
</ul>
<a target="_blank" rel="noopener" href="https://tva1.sinaimg.cn/large/008i3skNly1gs4q3uuh2pj30ms0xo1kx.jpg" title="image-20210704104726771" class="gallery-item"><img src="https://tva1.sinaimg.cn/large/008i3skNly1gs4q3uuh2pj30ms0xo1kx.jpg" alt="image-20210704104726771" style="zoom: 50%;" /></a>

<p>发光过程：当电流超过阈值电流时，粒子数反转，自发辐射产生的光子与处于导带的电子相互作用产生受激辐射，不断反射增强。</p>
<h4 id="structure-of-LDs"><a href="#structure-of-LDs" class="headerlink" title="structure of LDs"></a>structure of LDs</h4><ul>
<li><p>Fabry–Perot laser diodes</p>
<p>两边加腔镜。满足驻波条件的光 $2L&#x2F;\lambda&#x3D;N$ 才能不断增强, 纵模间隔为<br>$$<br>\lambda_{N}-\lambda_{N+1}\approx\frac{2L}{N^2}&#x3D;\frac{\lambda^2}{2L},<br>$$<br>由于产生的光通常是多纵模，其光谱带宽较大。如果 $\lambda$ 是真空中波长，那么 $L$ 是光学长度 $nl.$</p>
</li>
<li><p>Quantum Well laser diode</p>
<p>To make lasing action more efficient, a special fabrication technique is used to form an especially thin active region, one on the order of 4 to 20 nm thickness. Such devices are called <em>quantum–well</em> (QW) laser diodes. 下图是量子阱和和多量子阱结构。</p>
<a target="_blank" rel="noopener" href="https://tva1.sinaimg.cn/large/008i3skNly1gs4qukindsj311s0rswk3.jpg" title="image-20210704111301209" class="gallery-item"><img src="https://tva1.sinaimg.cn/large/008i3skNly1gs4qukindsj311s0rswk3.jpg" alt="image-20210704111301209" style="zoom: 50%;" /></a>
</li>
<li><p>Distributed–feedback (DFB) laser diodes</p>
<p>在PN结上刻蚀布拉格光栅，利用光栅结构做成了一个分布式的反射镜，只有满足布拉格条件 (Brag condition) 的光才能不停反射刺激产生受激辐射不断增强：<br>$$<br>2\Lambda n_{\text{eff}}&#x3D;\lambda_B,<br>$$<br>其中 $\Lambda$ 为光栅周期， $n_{\text{eff}}$ 为有效折射率，$n_{\text{eff}}&#x3D;n\sin\theta.$</p>
<a target="_blank" rel="noopener" href="https://tva1.sinaimg.cn/large/008i3skNly1gs4qjeeuxej30vi09wtcu.jpg" title="image-20210704110224224" class="gallery-item"><img src="https://tva1.sinaimg.cn/large/008i3skNly1gs4qjeeuxej30vi09wtcu.jpg" alt="image-20210704110224224" style="zoom:67%;" /></a>


</li>
<li><p>Distributed–Bragg–reflector (DBR) laser diode</p>
<p>两边放布拉格光栅，满足布拉格条件的光会不断反射增强。</p>
<a target="_blank" rel="noopener" href="https://tva1.sinaimg.cn/large/008i3skNly1gs4qt60gxqj316o0780vw.jpg" title="image-20210704111145752" class="gallery-item"><img src="https://tva1.sinaimg.cn/large/008i3skNly1gs4qt60gxqj316o0780vw.jpg" alt="image-20210704111145752" style="zoom:67%;" /></a>

<p>上图为DBR和DFB的对比图，(a) 为DBR LD，(c) 为DFB LD, (b) 是 (c) 的光栅结构示意。它们都用了多量子阱结构 (MQW) 限制了active region的厚度。</p>
</li>
<li><p>Vertical–cavity surface–emitting lasers (VCSEL)</p>
<p>The words <em>surface emitting</em> mean that the laser’s beam is emitting perpendicular to the wafer.</p>
<p>VCSEL的二极管体积小 (2 $\mu$m) ，因此纵模间隔很大，容易做到单纵模, 而且容易集成到芯片。(VCSELs therefore manifest a useful new twist in the marriage of optics and electronics.)</p>
<p>QW LD提高方向性和效率，DBR、DFB、VCSEL易发展单纵模</p>
</li>
</ul>
<h4 id="properties-1"><a href="#properties-1" class="headerlink" title="properties"></a>properties</h4><ul>
<li><p>外部光子使得受激辐射发出来的光和它的频率一致、相位一致、方向一致，因此带宽窄 (&lt;1nm) 、光源为相干光、方向性好</p>
</li>
<li><p>产生的光子都对出射光有贡献，发光效率高。 To make an LED radiate 1 mW of output power requires up to 150 mA of forward current; a laser diode can radiate 1 mW at 10 mA.</p>
</li>
<li><p>cooled and uncooled </p>
<p>uncooled说明LD不需要冷却，发光效率高，热辐射小</p>
</li>
<li><p>rated output power $\text{P}_R$</p>
<p>$\text{P}_R$ Is the maximum recommended power</p>
</li>
<li><p>Spectral shift</p>
<p>Peak wavelength moves with temperature</p>
</li>
<li><p><strong>Slope efficiency</strong></p>
<p>Differential (quantum) efficiency.<br>$$<br>S&#x3D;\frac{\Delta P}{\Delta I}&#x3D;\frac{P_{R}-P_{\text{th}}}{I_{\text{tot}}-I_{\text{th}}}.<br>$$</p>
</li>
<li><p>Chirp （啁啾）</p>
<p>啁啾是指发光波长与中心波长的偏离，当LD的电流改变时，会产生啁啾，这也是之后内调制LD不好使的原因之一。</p>
</li>
</ul>
<h4 id="three-efficiencies"><a href="#three-efficiencies" class="headerlink" title="three efficiencies"></a>three efficiencies</h4><ul>
<li><p>功率效率 Power Efficiency </p>
<p>输出光功率与使用的电功率之比。使用的电功率由发光消耗电子的功率和外部电路功率组成。<br>$$<br>\eta_p&#x3D;\frac{P}{P_{\text{dc}}}&#x3D;\frac{P}{I_F\times E_g&#x2F;e+I_F^2R}<br>$$</p>
</li>
<li><p>外量子效率 External Quantum Efficiency</p>
<p>外量子效率是出射光子数和注入电子数的比。<br>$$<br>\eta_{\text{ext}}&#x3D;\frac{P\times t}{E_p}\bigg&#x2F;\frac{I_F\times t}{e}&#x3D;\frac{P}{I_F\times E_g&#x2F;e},<br>$$<br>利用Slope efficiency计算：<br>$$<br>\begin{equation}<br>\begin{split}<br>\Delta P&amp;&#x3D;S\Delta I\<br>\Delta P&amp;&#x3D;\eta_{\text{ext}}\times E_g&#x2F;e\times \Delta I_F\<br>\implies \eta_{\text{ext}}&amp;&#x3D;\frac{S}{E_g&#x2F;e}<br>\end{split}<br>\end{equation}<br>$$</p>
</li>
<li><p>内量子效率 Internal Quantum Efficiency</p>
<p>注入电子转化成光子的比例，这是由非辐射复合和辐射复合的速率决定的，设 $n$ 是单位体积的载流子数，则<br>$$<br>\begin{equation}<br>\begin{split}<br>v&amp;&#x3D;\frac{\text{d}n}{\text{d}t}&#x3D;-\frac{n}{\tau},\<br>\eta_{\text{int}}&amp;&#x3D;\frac{v_{r}\times T}{v_{tot}\times T}&#x3D;\frac{\tau}{\tau_{r}}&#x3D;1-\frac{\tau}{\tau_{nr}}.</p>
<p>\end{split}<br>\end{equation}<br>$$</p>
</li>
<li><p>腔量子效率</p>
<p>这个是由内外量子效率定义的，表示出射的光子与产生的光子的比例：<br>$$<br>\eta_{\text{ext}}&#x3D;\eta_{\text{int}}\cdot \eta_{\text{cav}}<br>$$<br>腔量子效率可以用损耗来计算。总损耗是由出射损耗和active region的吸收损耗构成，对于腔来说，出射损耗乘总光子数就是出射光子数，而吸收损耗则为产生的光子数:<br>$$<br>\begin{equation}<br>\begin{split}<br>I&amp;&#x3D;I_0R_1R_2e^{-\alpha_{mat}2d}&#x3D;I_0e^{-\alpha 2d}\<br>\implies \alpha&amp;&#x3D;\alpha_{mat}+\alpha_{tr},\ \alpha_{tr}&#x3D;\frac{1}{2d}\ln\frac{1}{R_1R_2},\<br>\eta_{\text{cav}}&amp;&#x3D;\frac{\alpha_{tr}}{\alpha}.<br>\end{split}<br>\end{equation}<br>$$</p>
</li>
</ul>
<h3 id="Transmitter-Module"><a href="#Transmitter-Module" class="headerlink" title="Transmitter Module"></a>Transmitter Module</h3><h4 id="Internal-modulation"><a href="#Internal-modulation" class="headerlink" title="Internal modulation"></a>Internal modulation</h4><a target="_blank" rel="noopener" href="https://tva1.sinaimg.cn/large/008i3skNly1gs4ryx6fymj310c0ltwm7.jpg" title="image-20210704115155286" class="gallery-item"><img src="https://tva1.sinaimg.cn/large/008i3skNly1gs4ryx6fymj310c0ltwm7.jpg" alt="image-20210704115155286" style="zoom:67%;" /></a>

<p>Laser driver 给LD提供电流驱动（将电压源转换成电流源），另外提供偏置电流以加速调制过程。</p>
<p>由于LD对电流改变的响应时间较慢（laser diode’s relaxation frequency，内调制LD的带宽受到限制；而且内调制存在啁啾问题，导致难以用到WDM系统中，因此人们转向发展外调制LD。</p>
<h4 id="External-modulation"><a href="#External-modulation" class="headerlink" title="External modulation"></a>External modulation</h4><p>外调制用CW激光器，分为 <strong>Mach–Zehnder  (MDM)</strong> 和 <strong>Electroabsorption (EA)</strong> 电吸收调制器两种。</p>
<p>MDM利用电压对折射率的改变，一个臂加调制信号对应的电压，低电压正常出光，高电压产生90度相移干涉相消。MDM有两个坏：一是驱动电压较大（10V左右），一是有一个干涉仪外部附件，插入损耗大。</p>
<p>电吸收调制器直接造在LD的材料上，把电压调制加在出光后的半导体波导上，利用波导的 <em>Franz–Keldysh effect</em>（When modulation voltage is applied, a bandgap, $E_g$ of the waveguide material decreases)，加电压后带隙降低，于是可以吸收光子，吸收了光子光强就降低了。</p>
<h2 id="5-Receivers"><a href="#5-Receivers" class="headerlink" title="5 Receivers"></a>5 Receivers</h2><h3 id="Photodiode"><a href="#Photodiode" class="headerlink" title="Photodiode"></a>Photodiode</h3><h4 id="Principle"><a href="#Principle" class="headerlink" title="Principle"></a>Principle</h4><p>PN结depletion region中复合好的电子空穴对接收光子的能量分开，形成光电流。或者说光子的能量使得被束缚在原子核附近的电子跳出来成为自由电子。</p>
<ul>
<li><p>光电压模式 photovoltaic</p>
<p>不加额外电压，比如solar panels.</p>
</li>
<li><p>光电导模式 photoconductive</p>
<p>加反向偏压（使得depletion region变厚, $w\sim \sqrt{V}$ ）。</p>
<p>有许多好处：</p>
<ul>
<li>提高响应速度。As soon as the incident photon creates eletron–hole pairs, this voltage helps to seperate these free charge carriers and quickly removes them from the depletion region.</li>
<li>由于depletion region电阻高，反向偏压都加在这里，可以有效减小暗电流（及时把由热能激发的自由电子搬走）<ul>
<li><strong>注意：</strong>实际情况应该是暗电流随反向偏压增大而增加（见2020年考题），这是由于电压增加有利于器件本身的少数载流子（P中的电子，N中的空穴）漂移 ——by whw</li>
</ul>
</li>
<li>使电子空穴对的分离都集中在depletion region中（提高产生光电流的电流密度？solar panel不用是因为它需要大面积接收光子？而且是用于产生电能的）。光子打到n区或者p区时，在p区或者n区由于电压低，电子空穴对无法被有效分离。</li>
<li>减小重新复合（recombination），提高光电流产生效率。The reverse voltage sweeps them from the depletion region faster than they can recombine again.</li>
</ul>
</li>
</ul>
<h4 id="Responsivity"><a href="#Responsivity" class="headerlink" title="Responsivity"></a>Responsivity</h4><p>响应度描述光子–光电流的对应关系：<br>$$<br>I_p&#x3D;RP.<br>$$</p>
<a target="_blank" rel="noopener" href="https://tva1.sinaimg.cn/large/008i3skNly1gs5vj1bp8zj31820fqah1.jpg" title="image-20210705104024175" class="gallery-item"><img src="https://tva1.sinaimg.cn/large/008i3skNly1gs5vj1bp8zj31820fqah1.jpg" alt="image-20210705104024175" style="zoom: 50%;" /></a>

<blockquote>
<p>We usually evaluate any communications device by looking for its response to the amplitude and the frequency of the input signal. The first parameter (the device’s response to amplitude) describes the power input–output relationship, while the second (the response to the frequency of the signal) tells us about the device’s bandwidth.</p>
</blockquote>
<p>响应度是与波长有关的：</p>
<ul>
<li>随着波长的增加，响应度线性上升，这是由于单个光子的能量降低，相同功率中携带的光子数多了，激发的电子也就多</li>
<li>但是波长大到一定程度，$E_p&lt;E_g$ 的时候，就无法激发电子了，这时候就出现长波截止</li>
<li>波长小到一定程度，能量过大，用力过猛，可能把电子激发到原子内层（猜测），电子就不是自由电子了，那么这样也会出现短波截止</li>
</ul>
<p>量化一下线性关系：<br>$$<br>\begin{equation}<br>\begin{split}<br>I_p&amp;&#x3D;\frac{N_e\cdot e}{t},\ P&#x3D;\frac{N_p\cdot E_p}{t}&#x3D;\frac{N_p\cdot hc&#x2F;\lambda}{t}\<br>\implies&amp; R&#x3D;\frac{I_p}{P}&#x3D;\frac{N_e\cdot e}{N_p\cdot hc}\lambda\<br>\implies&amp; R(\text{A&#x2F;W})&#x3D;\frac{\eta}{1248}\lambda(\text{nm}),\ \eta&#x3D;\frac{N_e}{N_p}.<br>\end{split}<br>\end{equation}<br>$$<br>用指数吸收模型去进一步建模量子效率 $\eta$ 。假设PD的吸收系数为 $\alpha_{\text{abs}},$ active&#x2F;depletion region的厚度为 $w$, 则每一个吸收的光子产生一个电子，有<br>$$<br>P_{\text{abs}}&#x3D;P_{\text{in}}(1-e^{-\alpha_{\text{abs}}w}),<br>$$<br>量子效率为吸收的光功率除以进入的光功率：<br>$$<br>\eta&#x3D;\frac{P_{\text{abs}}}{P_{\text{in}}}&#x3D;1-e^{-\alpha_{\text{abs}}w}.<br>$$</p>
<h4 id="Bandwidth"><a href="#Bandwidth" class="headerlink" title="Bandwidth"></a>Bandwidth</h4><blockquote>
<p>Bandwidth can be defined as the maximum frequency, or bit rate, that a photodiode can detect without making essential errors.</p>
</blockquote>
<p>PD的带宽是它在一定误差内可以探测的光信号的最大频率，超过这个频率电信号还没产生，新的光子又打了过来，造成探测误差。这样分析过来，带宽由两部分决定：</p>
<ul>
<li><p>光子入射到电子产生的时间。由active region的厚度决定：<br>$$<br>\tau_{\text{tr}}&#x3D;\frac{w}{v_\text{sat}},<br>$$<br>其中 $v_{\text{sat}}$ 是载流子在depletion region的最大移动速度。</p>
</li>
<li><p>电子产生到PD响应的时间（充电时间）。由PD的结电容和负载电阻决定：<br>$$<br>\tau_{\text{RC}}&#x3D;(R_s+R_L)C_{\text{in}}\approx R_L C_{\text{in}}&#x3D;R_L\frac{\epsilon A}{w}.<br>$$</p>
</li>
</ul>
<p>带宽为：<br>$$<br>\text{BW}<em>{\text{PD}}&#x3D;\frac{1}{2\pi(\tau</em>{\text{tr}}+\tau_{\text{RC}})}.<br>$$<br>可见depleting region有一个最佳厚度，然后降低负载电阻和depletion region的面积 $A$, 但是这里有一个 trade–off，降低负载电阻会导致噪声增大。</p>
<h4 id="p–i–n-Photodiodes"><a href="#p–i–n-Photodiodes" class="headerlink" title="p–i–n Photodiodes"></a><em>p–i–n</em> Photodiodes</h4><blockquote>
<p>The major feature of this photodiode is that it consists of a thick, lightly doped intrinsic layer sandwiched between thin p and n regions.</p>
</blockquote>
<p>PIN PD有两个好处：</p>
<ul>
<li>depletion region厚，量子效率高</li>
<li>depletion region的厚度可以有中间的本征半导体控制，而不是像PN PD要通过加反向电压来增大，可以减小驱动电压</li>
</ul>
<a target="_blank" rel="noopener" href="https://tva1.sinaimg.cn/large/008i3skNly1gs6xx2q1ywj314e0q4ju8.jpg" title="IMG_0731" class="gallery-item"><img src="https://tva1.sinaimg.cn/large/008i3skNly1gs6xx2q1ywj314e0q4ju8.jpg" alt="IMG_0731" style="zoom: 50%;" /></a>

<p>上图是前向照明和后向照明 (rear–illuminated) 的pin PD，后向照明的重掺杂的 $n^+$ 层载流子多，可能是作为半导体层和金属层的过渡层，传输电子。</p>
<h4 id="Avalanche-Photodiodes"><a href="#Avalanche-Photodiodes" class="headerlink" title="Avalanche Photodiodes"></a>Avalanche Photodiodes</h4><blockquote>
<p>A special <em>p-i-n</em> structure of a photodiode is used. Incident photons generate primary electrons and holes, as they do in a regular <em>p-i-n</em> PD. Relatively high (around 20 V) reverse voltage is applied to the photodiode. This voltage accelerates photogenerated electrons and holes, which thereupon acquire high energy. These electrons and holes strike neutral atoms and separate other bonded electrons and holes. These secondary carriers gain enough energy to ionize other carriers, causing a so–called avalanche process of creating new carriers.</p>
</blockquote>
<a target="_blank" rel="noopener" href="https://tva1.sinaimg.cn/large/008i3skNly1gs6y98cdm8j60rs0s4wis02.jpg" title="IMG_494F0B5D7CBD-1" class="gallery-item"><img src="https://tva1.sinaimg.cn/large/008i3skNly1gs6y98cdm8j60rs0s4wis02.jpg" alt="IMG_494F0B5D7CBD-1" style="zoom:50%;" /></a>

<p>光子经过 $p^+$层到本征半导体层，激发出电子空穴对。反向电压把它们分离，把电子（阴离子？）移动到 $pn^+$结，在结区很高的电场（why？）加速阴离子的运动造成雪崩效应 (impact ionization)，这样一个光子产生 $M$ 个电子。</p>
<p>APD的响应度为:<br>$$<br>R_{\text{APD}}&#x3D;MR_{\text{p-i-n}}&#x3D;\frac{M\eta}{1248}\lambda<br>$$<br>要注意雪崩是需要时间的，因此有增益和带宽的trade–off：<br>$$<br>M\times \text{BW}&#x3D;\frac{1}{2\pi\tau_e}<br>$$<br>另外APD有高增益、低噪声，但缺点是需要高反向电压。</p>
<h3 id="Noise-in-PD"><a href="#Noise-in-PD" class="headerlink" title="Noise in PD"></a>Noise in PD</h3><p>总的噪声为<br>$$<br>i_{\text{noise}}&#x3D;\sqrt{i_{s}^2+i_t^2+i_d^2+i_{1&#x2F;f}^2},<br>$$<br>是散粒噪声、热噪声、暗电流噪声、1&#x2F;f噪声的均方根。</p>
<h4 id="Shot-noise-散粒噪声"><a href="#Shot-noise-散粒噪声" class="headerlink" title="Shot noise 散粒噪声"></a>Shot noise 散粒噪声</h4><p>散粒噪声来自于平均光生电子数的涨落。<br>$$<br>\begin{equation}<br>\begin{split}<br>S_s(f)&amp;&#x3D;2eI_p^<em>\<br>i_s&amp;&#x3D;\sqrt{S_s(f)\text{BW}_{\text{PD}}}&#x3D;\sqrt{2eI_p^</em>\text{BW}<em>{\text{PD}}}\<br>i</em>{sN}(A&#x2F;\sqrt{Hz})&amp;&#x3D;i_s&#x2F;\sqrt{\text{BW}<em>{\text{PD}}}&#x3D;\sqrt{2eI_p^*}.<br>\end{split}<br>\end{equation}<br>$$<br>其中 $I_p^*$ 是平均光电流，$i</em>{sN}$ 为标准带宽散粒噪声电流。</p>
<p>对 p-i-n PD，散粒噪声相比热噪声可忽略，但是对APD，散粒噪声被放大M倍，而热噪声没有被放大，因此不能忽略散粒噪声。</p>
<h4 id="Thermal-noise"><a href="#Thermal-noise" class="headerlink" title="Thermal noise"></a>Thermal noise</h4><p>温度变化引起的电子移动产生的电流为热噪声。它的值较大，在 p-i-n和APD中都是主要部分。<br>$$<br>\begin{equation}<br>\begin{split}<br>S_t(f)&amp;&#x3D;\frac{2k_BT}{R_L}\<br>i_t&amp;&#x3D;\sqrt{\frac{4k_BT}{R_L}\text{BW}_{\text{PD}}}\</p>
<p>\end{split}<br>\end{equation}<br>$$<br>从表达式中可以看到，增大负载 $R_L$ 可以有效减小热噪声，原因应该是负载电阻增加后PD上的电压降减小了。（但是会降低响应时间 $\tau_{RC}$）</p>
<h4 id="Dark–current-noise"><a href="#Dark–current-noise" class="headerlink" title="Dark–current noise"></a>Dark–current noise</h4><p>暗电流噪声是暗电流的均方根。<br>$$<br>i_d&#x3D;\sqrt{2eI_d^*\text{BW}_{\text{PD}}}<br>$$</p>
<h4 id="1-x2F-f-noise"><a href="#1-x2F-f-noise" class="headerlink" title="1&#x2F;f noise"></a>1&#x2F;f noise</h4><p>把频率相关的噪声都归到了这一类，可用经验公式拟合，一般频率高于 100Hz 就可以忽略。</p>
<h4 id="Signal–to–Noise-Ratio"><a href="#Signal–to–Noise-Ratio" class="headerlink" title="Signal–to–Noise Ratio"></a>Signal–to–Noise Ratio</h4><p>$$<br>\text{SNR}&#x3D;\frac{\text{signal power}}{\text{noise power}}&#x3D;\frac{I_p^{*2}R_L}{i_{\text{noise}}^2R_L}&#x3D;\frac{R^2P^{*2}}{i_{\text{noise}}^2}<br>$$</p>
<h4 id="Noise–equivalent-power"><a href="#Noise–equivalent-power" class="headerlink" title="Noise–equivalent power"></a>Noise–equivalent power</h4><p>噪声等价功率。<br>$$<br>\text{NEP(W)}&#x3D;\frac{i_{\text{noise}}}{R}<br>$$</p>
<h3 id="Sensitivity"><a href="#Sensitivity" class="headerlink" title="Sensitivity"></a>Sensitivity</h3><h4 id="Q-value"><a href="#Q-value" class="headerlink" title="Q value"></a>Q value</h4><p>考虑 Bit Error Rate：<br>$$<br>\begin{equation}<br>\begin{split}<br>\text{BER}&amp;&#x3D;0.5\left[P(1&#x2F;0)+P(0&#x2F;1)\right]\<br>&amp;&#x3D;0.5\times\left[0.5\operatorname{erfc\left(\frac{I_1-I_{\text{th}}}{i_1\sqrt{2}}\right)}+0.5\operatorname{erfc\left(\frac{I_{\text{th}}-I_0}{i_0\sqrt{2}}\right)}\right].<br>\end{split}<br>\end{equation}<br>$$<br>当BER最大时，有<br>$$<br>Q:&#x3D;\frac{I_1-I_{\text{th}}}{i_1}&#x3D;\frac{I_{\text{th}}-I_0}{i_0},<br>$$<br>此时阈值电流应为<br>$$<br>I_{\text{thopt}}&#x3D;\frac{I_1i_0+I_0i_1}{i_1+i_0},<br>$$<br>“数字信噪比” Q值为<br>$$<br>Q&#x3D;\frac{I_1-I_0}{i_1+i_0}.<br>$$<br>这就是Q值当来源，最小BER可以用Q值来表示：<br>$$<br>\text{BER}<em>{\min}&#x3D;\frac{1}{2}\operatorname{erfc}(\frac{Q}{\sqrt{2}}).<br>$$<br>因此一个通信系统，对它的BER做要求，可以转化为对Q值做要求，接下来可以进一步转化为对其PD的灵敏度 (最小接收光功率 $P</em>{\min}$) 做要求。</p>
<h4 id="Minimum-optical-power"><a href="#Minimum-optical-power" class="headerlink" title="Minimum optical power"></a>Minimum optical power</h4><p>Minimum received power is the average optical power received in both bit 1 and bit 0:<br>$$<br>P_\min&#x3D;\frac{P_1+P_0}{2}.<br>$$<br>不妨设 $P_0&#x3D;0,$ 则 $I_1&#x3D;RP_1&#x3D;2RP_\min$, 带入到Q值的表达式，就可以得到 $Q$ 与 $P_\min$ 的关系。</p>
<h3 id="Receiver-Module"><a href="#Receiver-Module" class="headerlink" title="Receiver Module"></a>Receiver Module</h3><p>pass.</p>
<h2 id="6-Amplifiers"><a href="#6-Amplifiers" class="headerlink" title="6 Amplifiers"></a>6 Amplifiers</h2><p>光放大器分为两类：半导体放大器和光纤放大器。</p>
<h3 id="Semiconductor-optical-amplifier"><a href="#Semiconductor-optical-amplifier" class="headerlink" title="Semiconductor optical amplifier"></a>Semiconductor optical amplifier</h3><p>pass.</p>
<h3 id="Erbrium-doped-fiber-amplifier"><a href="#Erbrium-doped-fiber-amplifier" class="headerlink" title="Erbrium doped fiber amplifier"></a>Erbrium doped fiber amplifier</h3><h4 id="pump"><a href="#pump" class="headerlink" title="pump"></a>pump</h4><p>Wavelength: 980 nm and 1480 nm</p>
<p>Type: copropagating and counterpropagating</p>
<ul>
<li>同向泵浦噪声小增益小，反向泵浦增益高噪声大</li>
</ul>
<h4 id="gain"><a href="#gain" class="headerlink" title="gain"></a>gain</h4><p>$$<br>\text{Gain}&#x3D;\frac{P_{\text{out}}-P_{\text{ASE}}}{P_{\text{in}}}.<br>$$</p>
<h3 id="noise-figure"><a href="#noise-figure" class="headerlink" title="noise figure"></a>noise figure</h3><p>$$<br>NF&#x3D;\frac{\text{SNR}<em>{in}}{\text{SNR}</em>{out}}&#x3D;\frac{P_{in-signal}&#x2F;P_{in-noise}}{P_{out-signal}&#x2F;P_{out-noise}}<br>$$</p>
<h4 id="Question-1"><a href="#Question-1" class="headerlink" title="Question"></a>Question</h4><p>自发辐射指数<br>$$<br>n_s&#x3D;\frac{N_2}{N_2-N_1}<br>$$<br> 为什么 $n_s$ 越大，自发辐射越大？</p>
<h2 id="7-Passive-Components"><a href="#7-Passive-Components" class="headerlink" title="7 Passive Components"></a>7 Passive Components</h2><h3 id="Coupler"><a href="#Coupler" class="headerlink" title="Coupler"></a>Coupler</h3><p>Coupler 是对单波长的光进行分束或者合束。</p>
<blockquote>
<p>Lossless coupling is impossible.</p>
</blockquote>
<h4 id="fused-biconical-taper-FBT-coupler"><a href="#fused-biconical-taper-FBT-coupler" class="headerlink" title="fused biconical taper (FBT) coupler"></a>fused biconical taper (FBT) coupler</h4><a target="_blank" rel="noopener" href="https://tva1.sinaimg.cn/large/008i3skNly1gs71ei0uw8j316z0rndmo.jpg" title="image-20210706104924746" class="gallery-item"><img src="https://tva1.sinaimg.cn/large/008i3skNly1gs71ei0uw8j316z0rndmo.jpg" alt="image-20210706104924746" style="zoom: 25%;" /></a>

<p>把耦合区域的光纤拉细，这样V值增加，MFD增加，就可以耦合到第二个光纤中。</p>
<p>出光情况为(?)：<br>$$<br>\begin{equation}<br>\begin{split}<br>P_1&amp;&#x3D;P_{in}\cos^2[k(\lambda)z]\<br>P_2&amp;&#x3D;P_{in}\sin^2[k(\lambda)z].<br>\end{split}<br>\end{equation}<br>$$</p>
<h4 id="Mach–Zehnder-interferometer-MZI-coupler"><a href="#Mach–Zehnder-interferometer-MZI-coupler" class="headerlink" title="Mach–Zehnder interferometer (MZI) coupler"></a>Mach–Zehnder interferometer (MZI) coupler</h4><a target="_blank" rel="noopener" href="https://tva1.sinaimg.cn/large/008i3skNly1gs71jxh4fwj30xk0bwwfj.jpg" title="image-20210706105437296" class="gallery-item"><img src="https://tva1.sinaimg.cn/large/008i3skNly1gs71jxh4fwj30xk0bwwfj.jpg" alt="image-20210706105437296" style="zoom:33%;" /></a>

<p>注意根据耦合波理论，由上边的光纤耦合进入下边或者反之，会经历一个 $\pi&#x2F;2$ 的相移。</p>
<p>如果 $\Delta L&#x3D;0,$ 则光会从4出来：</p>
<a target="_blank" rel="noopener" href="https://tva1.sinaimg.cn/large/008i3skNly1gs727kuvlhj31r80ki0y6.jpg" title="image-20210706111722178" class="gallery-item"><img src="https://tva1.sinaimg.cn/large/008i3skNly1gs727kuvlhj31r80ki0y6.jpg" alt="image-20210706111722178" style="zoom: 33%;" /></a>

<p>控制 $\Delta L$ 可以改变出光比例<br>$$<br>\begin{equation}<br>\begin{split}<br>P_4&amp;&#x3D;P_{in}\cos^2[k(\lambda)z]\<br>P_3&amp;&#x3D;P_{in}\sin^2[k(\lambda)z].<br>\end{split}<br>\end{equation}<br>$$<br>详细的计算有机会再补。</p>
<h3 id="Wavelength–Division-Multiplexer"><a href="#Wavelength–Division-Multiplexer" class="headerlink" title="Wavelength–Division Multiplexer"></a>Wavelength–Division Multiplexer</h3><p>WDM和Coupler的区别在于WDM是入射光是多波长的，WDM把每个波长分到不同的出口，而Coupler是把单色光的不同光强分到不同出口。</p>
<a target="_blank" rel="noopener" href="https://tva1.sinaimg.cn/large/008i3skNly1gs72hd9z44j313t0erwjk.jpg" title="image-20210706112645990" class="gallery-item"><img src="https://tva1.sinaimg.cn/large/008i3skNly1gs72hd9z44j313t0erwjk.jpg" alt="image-20210706112645990" style="zoom:67%;" /></a>

<p>实例如上图的阵列波导光栅(AWG)。AWG分光是利用干涉，入射AWG的光经过WDM coupler，均匀分发到AW传输，光到达不同出口经历的相移不一样，只有某一波长的光在此干涉增强。</p>
<h3 id="Filter"><a href="#Filter" class="headerlink" title="Filter"></a>Filter</h3><h4 id="Acousto–optic-tunable-filter"><a href="#Acousto–optic-tunable-filter" class="headerlink" title="Acousto–optic tunable filter"></a>Acousto–optic tunable filter</h4><a target="_blank" rel="noopener" href="https://tva1.sinaimg.cn/large/008i3skNly1gs72p3d9ndj30x10avtcv.jpg" title="image-20210706113411778" class="gallery-item"><img src="https://tva1.sinaimg.cn/large/008i3skNly1gs72p3d9ndj30x10avtcv.jpg" alt="image-20210706113411778" style="zoom:50%;" /></a>

<p>ATOF是个很有意思的器件，它基于布拉格衍射，由声波产生的光栅确定了一个 $\lambda_m$, 传输过程中仅此波长会发生TE&#x2F;TM的转换。利用偏振分束器和耦合器把 $\lambda_m$ 的光从许多波长中滤出来。</p>
<h3 id="Isolator-x2F-Circulator"><a href="#Isolator-x2F-Circulator" class="headerlink" title="Isolator &#x2F; Circulator"></a>Isolator &#x2F; Circulator</h3><p>利用偏振和旋光器件打造一个不可逆光路，单向的是isolator，多向的(1进2出，2进3出等)是circulator。</p>
<h4 id="有源-x2F-无源器件整理"><a href="#有源-x2F-无源器件整理" class="headerlink" title="有源&#x2F;无源器件整理"></a>有源&#x2F;无源器件整理</h4><p>需要电压驱动、泵浦光等的都属于有源器件。</p>
<table>
<thead>
<tr>
<th align="center">Component</th>
<th align="center">Type</th>
<th align="center">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Coupler</td>
<td align="center">Passive</td>
<td align="center">&#x2F;</td>
</tr>
<tr>
<td align="center">Attenuator</td>
<td align="center">Passive</td>
<td align="center">&#x2F;</td>
</tr>
<tr>
<td align="center">Filter</td>
<td align="center">Passive</td>
<td align="center">Tunable filter is active?</td>
</tr>
<tr>
<td align="center">Multiplexer</td>
<td align="center">Passive</td>
<td align="center">When use voltage to change refractive index, it is active</td>
</tr>
<tr>
<td align="center">Isolater</td>
<td align="center">Passive</td>
<td align="center">&#x2F;</td>
</tr>
<tr>
<td align="center">Circulator</td>
<td align="center">Passive</td>
<td align="center">&#x2F;</td>
</tr>
<tr>
<td align="center">Switch</td>
<td align="center">Active</td>
<td align="center">Require external power for operation and are activated by a 5V dc electrical signal.</td>
</tr>
<tr>
<td align="center">Wavelength Converters</td>
<td align="center">Active</td>
<td align="center">Need optical pump</td>
</tr>
<tr>
<td align="center">Cross-Connects</td>
<td align="center">Active</td>
<td align="center">Uses switch to redistribute optical signals</td>
</tr>
</tbody></table>
<h4 id="Question-2"><a href="#Question-2" class="headerlink" title="Question"></a>Question</h4><ul>
<li>讨论：MZI相消的时候能量去哪里了？返回去了。</li>
</ul>
<a target="_blank" rel="noopener" href="https://tva1.sinaimg.cn/large/008i3skNly1gr520po78vj30au0cin47.jpg" title="image-20210603141915257" class="gallery-item"><img src="https://tva1.sinaimg.cn/large/008i3skNly1gr520po78vj30au0cin47.jpg" alt="image-20210603141915257" style="zoom:67%;" /></a>



<ul>
<li>Why $\tau_{sys}&#x3D;0.35&#x2F;BW_{\max}$ ? Why not $\tau_{mod}$ ?In fact, $\tau&#x3D;0.35&#x2F;BW\implies \tau_{sys}&#x3D;0.35&#x2F;BW_{sys}, \tau_{mod}&#x3D;0.35&#x2F;BW_{mod}.$</li>
</ul>
<h2 id="一些题"><a href="#一些题" class="headerlink" title="一些题"></a>一些题</h2><ol>
<li><p>WDM is the leading technology in today’s communication network.</p>
<p>(1) Why do we use WDM systems?</p>
<p>​		To improve the system bandwidth. </p>
<p>(2) Please list three kinds of (de)multiplexers for WDM systems, also describe the basic working principle and advantages&#x2F;disadvantage for these (de)multiplexers.</p>
<ul>
<li>Arrayed–waveguide–grating WDMs (AWG). </li>
<li>Diffraction–grating WDMs. </li>
<li>Fiber Bragg grating (FBG) WDMs.</li>
<li>Dielectric multicavity thin–film filter (DMTF) WDMs.</li>
</ul>
<p> Advantages&#x2F;disadvantages: ?</p>
</li>
<li><p>The E–O efficiency of laser diode goes down with the operation temperature, explain the cause responsible for this observation.</p>
<p>(1) Threshold current changes with the temperature (much more sensitive than slope efficiency). When temperature goes up, $I_{th}$ also increases, therefore the same output power would require more current, which results in a decrease in efficiency.</p>
<p>(2) The peak withlength $\lambda_p$ moves with the temperature. When temperature increases, the wavelength would not at peak, hence requiring more current to level up the power. This would result an efficiency decrease.</p>
<p>(3) Slope efficiency $S$ changes with the temperature. $S$ decreases with the temperature increases, hence the same amount of power would require more current input, which reduces the E–O efficiency.</p>
<p>(4) Thermal noise and dark noise increases with the temperature.</p>
</li>
</ol>
<h1 id="光通信实验"><a href="#光通信实验" class="headerlink" title="光通信实验"></a>光通信实验</h1><h2 id="1-DC-色散补偿"><a href="#1-DC-色散补偿" class="headerlink" title="1 DC 色散补偿"></a>1 DC 色散补偿</h2><h3 id="Q-factor"><a href="#Q-factor" class="headerlink" title="Q factor"></a>Q factor</h3><ol>
<li>计算：</li>
</ol>
<p><a target="_blank" rel="noopener" href="https://tva1.sinaimg.cn/large/008i3skNgy1gryxpov452j30tw0dugsp.jpg" title="image-20210629103715140" class="gallery-item"><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gryxpov452j30tw0dugsp.jpg" alt="image-20210629103715140"></a></p>
<p>$$<br>Q &#x3D; \frac { V _ { \text {th } } - b _ { \text {off } } } { \sigma _ { \text {off } } } &#x3D; \frac { b _ { \text {on } } - V _ { \text {th } } } { \sigma _ { \text {on } } }<br>$$</p>
<ol start="2">
<li><p>系统对Q值的要求</p>
<a target="_blank" rel="noopener" href="https://tva1.sinaimg.cn/large/008i3skNgy1gryxtqpiqgj31260rstcs.jpg" title="image-20210629104109597" class="gallery-item"><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gryxtqpiqgj31260rstcs.jpg" alt="image-20210629104109597" style="zoom: 67%;" /></a></li>
</ol>
<h3 id="OSNR"><a href="#OSNR" class="headerlink" title="OSNR"></a>OSNR</h3><p>The ratio of optical power to the ASE power (within a certain bandwidth) :<br>$$<br>\text{OSNR}&#x3D;\frac{P_{in}}{P^{\text{tot}}_{ASE}}<br>$$</p>
<h2 id="2-DWDM-密集波分复用"><a href="#2-DWDM-密集波分复用" class="headerlink" title="2 DWDM 密集波分复用"></a>2 DWDM 密集波分复用</h2><h3 id="Optical-Bands"><a href="#Optical-Bands" class="headerlink" title="Optical Bands"></a>Optical Bands</h3><table>
<thead>
<tr>
<th>Band Name</th>
<th>Wavelengths</th>
<th align="center">Description</th>
</tr>
</thead>
<tbody><tr>
<td>O-band</td>
<td>1260 – 1360 nm</td>
<td align="center">Original band, PON upstream</td>
</tr>
<tr>
<td>E-band</td>
<td>1360 – 1460 nm</td>
<td align="center">Water peak band</td>
</tr>
<tr>
<td>S-band</td>
<td>1460 – 1530 nm</td>
<td align="center">PON downstream</td>
</tr>
<tr>
<td>C-band</td>
<td>1530 – 1565 nm</td>
<td align="center">Lowest attenuation, original DWDM band, compatible with fiber amplifiers, CATV</td>
</tr>
<tr>
<td>L-band</td>
<td>1565 – 1625 nm</td>
<td align="center">Low attenuation, expanded DWDM band</td>
</tr>
<tr>
<td>U-band</td>
<td>1625 – 1675 nm</td>
<td align="center">Ultra-long wavelength</td>
</tr>
</tbody></table>
<h3 id="Types-of-WDM"><a href="#Types-of-WDM" class="headerlink" title="Types of WDM"></a>Types of WDM</h3><table>
<thead>
<tr>
<th align="center">Description\Type</th>
<th align="center">Coarse WDM</th>
<th align="center">WDM</th>
<th align="center">DWDM</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Channel Spacings</td>
<td align="center">Large, from 1.6 nm to 25 nm</td>
<td align="center">1310 nm lasers used in conjunction with 1550 nm lasers</td>
<td align="center">Small, 1.6 nm (200 GHz) and less</td>
</tr>
<tr>
<td align="center">Optical bands used</td>
<td align="center">O,E,S,C and L</td>
<td align="center">O and C</td>
<td align="center">C and L</td>
</tr>
<tr>
<td align="center">Cost per channel</td>
<td align="center">Low</td>
<td align="center">Low</td>
<td align="center">High</td>
</tr>
<tr>
<td align="center">Number of channels</td>
<td align="center">17–18 at most</td>
<td align="center">2</td>
<td align="center">Hundreds of channels possible</td>
</tr>
<tr>
<td align="center">Application</td>
<td align="center">Short–haul, Metro</td>
<td align="center">PON</td>
<td align="center">Long–haul</td>
</tr>
</tbody></table>
<h3 id="Dependence-of-parameters"><a href="#Dependence-of-parameters" class="headerlink" title="Dependence of parameters"></a>Dependence of parameters</h3><ul>
<li><p>distance</p>
</li>
<li><p>transmitter power</p>
<ul>
<li>太大了非线性效应大，太小了传输损耗大</li>
</ul>
</li>
<li><p>In-line power ?</p>
</li>
<li><p>channel spacing</p>
</li>
</ul>
<h2 id="3-Fout-Wave-Mixing-四波混频"><a href="#3-Fout-Wave-Mixing-四波混频" class="headerlink" title="3 Fout-Wave Mixing  四波混频"></a>3 Fout-Wave Mixing  四波混频</h2><h3 id="Basics"><a href="#Basics" class="headerlink" title="Basics"></a>Basics</h3><p>When three waves at frequencies $f_i,f_j,f_k$ traverse a fiber, they generate another signal located at $f&#x3D;f_i+f_j-f_k.$</p>
<a target="_blank" rel="noopener" href="https://tva1.sinaimg.cn/large/008i3skNly1gs7da0iiu8j321c0gwdjc.jpg" title="IMG_0718" class="gallery-item"><img src="https://tva1.sinaimg.cn/large/008i3skNly1gs7da0iiu8j321c0gwdjc.jpg" alt="IMG_0718" style="zoom: 33%;" /></a>

<p>In general, the number of newly generated signals is given by<br>$$<br>M&#x3D;2C_N^2+3C_N^3&#x3D;\frac{N^2(N-1)}{2}.<br>$$<br>FWM is a third order nonlinearity. Assume the interacted plane waves are<br>$$<br>\mathbf{E}_q&#x3D;E(\omega_q)\exp\left({-j\mathbf{k_q}\cdot\mathbf{r}}\right),<br>$$<br>the posible generated wavelength should satisfy energy conservation and momentum conservation (phase matching):<br>$$<br>\begin{equation}<br>\begin{split}<br>\omega_1+\omega_2&amp;&#x3D;\omega_3+\omega_4,\<br>\mathbf{k}_1+\mathbf{k}_2&amp;&#x3D;\mathbf{k}_3+\mathbf{k}_4.<br>\end{split}<br>\end{equation}<br>$$</p>
<p>When phase mismatches, $\Delta k&#x3D;k_1+k_2-k_3$ determines the FWM efficiency $\eta_F$,<br>$$<br>\begin{equation}<br>\begin{split}<br>\Delta k\ll 0&amp;\implies \eta_F\to 1,\<br>\Delta k \gg 1 &amp;\implies \eta_F\to 0.<br>\end{split}<br>\end{equation}<br>$$</p>
<h3 id="Reducing-FWM"><a href="#Reducing-FWM" class="headerlink" title="Reducing FWM"></a>Reducing FWM</h3><p>FWM will cause power depletion on DWDM system. Possible solutions are:</p>
<ul>
<li><p>Polarization allocation</p>
<a target="_blank" rel="noopener" href="https://tva1.sinaimg.cn/large/008i3skNgy1grz6czlho2j315h0u0aoi.jpg" title="image-20210629153624262" class="gallery-item"><img src="https://tva1.sinaimg.cn/large/008i3skNgy1grz6czlho2j315h0u0aoi.jpg" alt="image-20210629153624262" style="zoom: 33%;" /></a>
</li>
<li><p>Unequal spacing</p>
<a target="_blank" rel="noopener" href="https://tva1.sinaimg.cn/large/008i3skNgy1grz6ek5hrzj31i00p0n7s.jpg" title="image-20210629153757209" class="gallery-item"><img src="https://tva1.sinaimg.cn/large/008i3skNgy1grz6ek5hrzj31i00p0n7s.jpg" alt="image-20210629153757209" style="zoom:33%;" /></a>
</li>
<li><p>Dispersion management</p>
<ul>
<li>Eliminate zero-dispersion point</li>
<li>But make total dispersion near zero</li>
</ul>
</li>
</ul>
<p><strong>为什么色散管理可以减小FWM？</strong>Four wave mixing (FWM) need a certain well controlled amount of dis persion, i.e. <strong>resudial dispersion</strong>? 为什么要给零色散波长处的色散留一个残差？</p>
<p>考虑四波混频 (FWM) 的理论推导：<br>$$<br>\frac { d A _ { 4 } } { d z } &#x3D; i \gamma _ { 4 } \left( 2 \left| A _ { 1 } \right| ^ { 2 } A _ { 4 } + 2 \left| A _ { 2 } \right| ^ { 2 } A _ { 4 } + 2 \left| A _ { 3 } \right| ^ { 2 } A _ { 4 } + \left| A _ { 4 } \right| ^ { 2 } A _ { 4 } + 2 A _ { 1 } A _ { 2 } A _ { 3 } ^ { * } e ^ { - i \Delta \beta z } \right)<br>$$<br>可以看到，当 $\Delta \beta&#x3D;\beta_3+\beta_4-\beta_1-\beta_2$ 很小时，FWM效应很大，后面的推导可以证明 $\Delta\beta$ <strong>就是色散常数</strong> $D(\lambda).$ 将 $\beta$ 在 $\omega_0$ (零色散频率) 处展开：<br>$$<br>\beta ( \omega ) &#x3D; \beta _ { 0 } \left( \omega _ { 0 } \right) + \frac{d\beta}{d\omega}\bigg|<em>{\omega_0}\left( \omega - \omega _ { 0 } \right) + \frac { 1 } { 2 }  \frac{d^2\beta}{d\omega^2}\bigg|</em>{\omega _ { 0 }} \left( \omega - \omega _ { 0 } \right) ^ { 2 } + \cdots<br>$$<br>则 :<br>$$<br>\begin{aligned}<br>\Delta \beta&amp;&#x3D;\beta_3+\beta_4-\beta_1-\beta_2\<br>&amp;&#x3D;(\omega_3+\omega_4-\omega_1-\omega_2)+\frac{1}{2}D(\omega_0)(\omega-\omega_0)^2\<br>&amp;&#x3D;\frac{1}{2}D(\omega_0)(\omega-\omega_0)^2,</p>
<p>\end{aligned}<br>$$<br>其中 $\omega_3+\omega_4-\omega_1-\omega_2&#x3D;0$ 是由于能量守恒。</p>
<ul>
<li>Increasing effective area of fiber<ul>
<li>FWM and other effect most likely to take place at locations of high power density . One way to reduce FWM is using a large effective area fiber since large effective area fibers spread the power density more evenly across the fiber core —&gt; peak power reduced and thus FWM</li>
</ul>
</li>
</ul>
<h2 id="4-EDFA"><a href="#4-EDFA" class="headerlink" title="4 EDFA"></a>4 EDFA</h2><a target="_blank" rel="noopener" href="https://tva1.sinaimg.cn/large/008i3skNgy1grzbfjtaaaj30yq0e2wgg.jpg" title="image-20210629183154933" class="gallery-item"><img src="https://tva1.sinaimg.cn/large/008i3skNgy1grzbfjtaaaj30yq0e2wgg.jpg" alt="image-20210629183154933" style="zoom:67%;" /></a>

<h3 id="Descriptions"><a href="#Descriptions" class="headerlink" title="Descriptions"></a>Descriptions</h3><ul>
<li><p>Invented at Stanford in early 1980s by H. J. Shaw and Michel </p>
<p>Digonnet</p>
</li>
<li><p>Works best in the range from 1530 to 1565 nm</p>
</li>
<li><p>Gains of 30–40 dB possible</p>
</li>
<li><p>Within a length of doped fiber part of the pump energy is transferred to the </p>
<p>input signal by stimulated emission</p>
</li>
<li><p>Pump  wavelength is either 980 nm or 1480 nm, pump power ~ 50 mW (LD power between 10 and 200 mW)</p>
</li>
<li><p>Spontaneous emission occurs randomly at time constant $\sim 1\ \text{ms}$</p>
</li>
<li><p>Fiber length is typically $10\ \text{m}$</p>
</li>
</ul>
<h3 id="Pumping-wavelengtsh"><a href="#Pumping-wavelengtsh" class="headerlink" title="Pumping wavelengtsh"></a>Pumping wavelengtsh</h3><a target="_blank" rel="noopener" href="https://tva1.sinaimg.cn/large/008i3skNgy1grzcikah70j30m80f6dgj.jpg" title="ER110-4_Absorption_800" class="gallery-item"><img src="https://tva1.sinaimg.cn/large/008i3skNgy1grzcikah70j30m80f6dgj.jpg" alt="ER110-4_Absorption_800" style="zoom:67%;" /></a>

<ul>
<li><p>980 nm: low noise, narrow absorption band, for <strong>low noise performance</strong> requirement</p>
</li>
<li><p>1480 nm: hight efficiency, broader absorption cross-section , for <strong>higher power amplifiers</strong></p>
</li>
</ul>
<h3 id="Emission-property"><a href="#Emission-property" class="headerlink" title="Emission property"></a>Emission property</h3><ul>
<li>$1.52–1.57 \ \mu\text{m}$</li>
<li>Long living upper state (10 ms)</li>
<li>Gain $\sim 30\ \text{dB}$</li>
<li>High output power, &gt;200 mW</li>
<li>EDFA is in saturation if almost all Erbium ions are consumed for amplification</li>
</ul>
<h3 id="Noise"><a href="#Noise" class="headerlink" title="Noise"></a>Noise</h3><a target="_blank" rel="noopener" href="https://tva1.sinaimg.cn/large/008i3skNgy1grzd2ibdhpj31cu0d2jwg.jpg" title="image-20210629192834372" class="gallery-item"><img src="https://tva1.sinaimg.cn/large/008i3skNgy1grzd2ibdhpj31cu0d2jwg.jpg" alt="image-20210629192834372" style="zoom: 67%;" /></a>

<ul>
<li><p>Noise figure in an ideal DFA is 3 dB (physical limit)</p>
<ul>
<li>Noise figure is defined as<br>$$<br>\begin{equation}<br>F&#x3D;\frac{\text{SNR}<em>\text{i}}{\text{SNR}<em>\text{o}}&#x3D;\frac{P</em>{\text{ASE}}}{h\nu \cdot G\cdot \text{BW}</em>{OSA}}<br>\end{equation}<br>$$</li>
</ul>
</li>
<li><p>Practical amplifiers can have noise figure as large as 6–8 dB</p>
</li>
<li><p>The principal source of noise in DFAs is Amplified Spontaneous Emission (ASE), which has </p>
<p>a spectrum approximately the same as the gain spectrum of the amplifier.</p>
<ul>
<li><p>Spontaneous emission (SE) is not polarized or coherent </p>
</li>
<li><p>SE wavelength: 1520–1570 nm</p>
</li>
<li><p>Input signal(s) consume metastable (亚稳态) electrons —&gt; much less ASE</p>
<p>注：电子会在激发态上待100纳秒左右，但是在亚稳态上，会停留大概10毫秒左右，这些在亚稳态上的电子应该是会贡献自发辐射，它们被用于产生受激辐射后，ASE显然会降低。</p>
<a target="_blank" rel="noopener" href="https://tva1.sinaimg.cn/large/008i3skNgy1grzyorq1vtj616o0l80w302.jpg" title="image-20210630075632474" class="gallery-item"><img src="https://tva1.sinaimg.cn/large/008i3skNgy1grzyorq1vtj616o0l80w302.jpg" alt="image-20210630075632474" style="zoom:67%;" /></a></li>
</ul>
</li>
</ul>
<h3 id="Applications"><a href="#Applications" class="headerlink" title="Applications"></a>Applications</h3><table>
<thead>
<tr>
<th align="center">Type</th>
<th align="center">Gain</th>
<th align="center">Noise Figure</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Power amplifier</td>
<td align="center">High</td>
<td align="center">Not very important</td>
</tr>
<tr>
<td align="center">In-line amplifier</td>
<td align="center">Medium</td>
<td align="center">Good</td>
</tr>
<tr>
<td align="center">Preamplifier</td>
<td align="center">Low</td>
<td align="center">Low value &lt; 5 dB essential</td>
</tr>
</tbody></table>
<h2 id="5-Raman"><a href="#5-Raman" class="headerlink" title="5 Raman"></a>5 Raman</h2><p>如果一个弱信号光与一个强泵浦光同时在一根光纤中传输，并且弱信号光的波长在强泵浦光的拉曼增益带宽内（约70~100nm），则强泵浦光的能量通过受激拉曼散射SRS耦合到光纤硅材料的振荡模中，然后又以较长的波长发射，该波长就是信号光的波长，从而使弱信号光得到放大，获得拉曼增益。</p>
<p>RFA是分布式放大器，EDFA是掺铒光纤作为增益介质的集中式放大器。</p>
<a target="_blank" rel="noopener" href="https://tva1.sinaimg.cn/large/008i3skNgy1grzzqf0cp6j307s05fwef.jpg" title="raman_srs" class="gallery-item"><img src="https://tva1.sinaimg.cn/large/008i3skNgy1grzzqf0cp6j307s05fwef.jpg" alt="raman_srs" style="zoom:150%;" /></a>

<h3 id="Fiber-amplifier-comparision"><a href="#Fiber-amplifier-comparision" class="headerlink" title="Fiber amplifier comparision"></a>Fiber amplifier comparision</h3><table>
<thead>
<tr>
<th align="center">Type</th>
<th align="center">Wavelength&#x2F;nm</th>
<th align="center">Bandwidth&#x2F;THz</th>
<th align="center">Satuation power&#x2F;dBm</th>
<th align="center">Gain&#x2F;dB</th>
<th align="center">NF&#x2F;dB</th>
</tr>
</thead>
<tbody><tr>
<td align="center">SOA</td>
<td align="center">800–1600</td>
<td align="center">10</td>
<td align="center">10</td>
<td align="center">30</td>
<td align="center">6</td>
</tr>
<tr>
<td align="center">EDFA</td>
<td align="center">C and L band</td>
<td align="center">2–10</td>
<td align="center">10–24</td>
<td align="center">40</td>
<td align="center">3–4</td>
</tr>
<tr>
<td align="center">FRA</td>
<td align="center">up to pumping source</td>
<td align="center">10</td>
<td align="center">20</td>
<td align="center">20–40</td>
<td align="center">3</td>
</tr>
<tr>
<td align="center">TDFA</td>
<td align="center">S band</td>
<td align="center">5</td>
<td align="center">&gt;10</td>
<td align="center">20</td>
<td align="center">6</td>
</tr>
<tr>
<td align="center">PDFA</td>
<td align="center">1310</td>
<td align="center">2</td>
<td align="center">&gt;10</td>
<td align="center">30</td>
<td align="center">6</td>
</tr>
</tbody></table>
<p>注：TDFA, Thulium–Doped Fiber Amplifiers , used for S band; PDFA, Praseodymium–Doped Fiber Amplifiers, used for O band.</p>
<h3 id="Noise-1"><a href="#Noise-1" class="headerlink" title="Noise"></a>Noise</h3><ul>
<li>Double Rayleigh scattering (DRS)</li>
<li>Short upper–state lifetime (3–6 fs) ?<ul>
<li>pump fluctuation</li>
</ul>
</li>
<li>ASE</li>
<li>Phonon–stimulated optical noise<ul>
<li>Thermally induced phonons in fiber that can spontaneously experience gain from the pumps</li>
</ul>
</li>
</ul>
<h3 id="Pump-types"><a href="#Pump-types" class="headerlink" title="Pump types"></a>Pump types</h3><table>
<thead>
<tr>
<th align="center">泵浦方式</th>
<th align="center">定义</th>
<th align="center">应用位置</th>
<th align="center">特点</th>
</tr>
</thead>
<tbody><tr>
<td align="center">前向泵浦</td>
<td align="center">泵浦光与信号光同方向</td>
<td align="center">发送端</td>
<td align="center">1、放大EDFA无法放大的波段。2、提高拉曼的增益平坦度。</td>
</tr>
<tr>
<td align="center">后向泵浦</td>
<td align="center">泵浦光与信号光反方向</td>
<td align="center">接收端</td>
<td align="center">与前向泵浦相比较，采用后向泵浦可以避免泵浦噪声串扰到信号中，从而使放大器的噪声较低，同时后向泵浦的偏振依赖性也较小。</td>
</tr>
</tbody></table>
<h3 id="Hybrid-Amplifiers"><a href="#Hybrid-Amplifiers" class="headerlink" title="Hybrid Amplifiers"></a>Hybrid Amplifiers</h3><ul>
<li><p>Flatten EDFA gain by using Raman gain</p>
<ul>
<li>EDFA: Mature technology</li>
<li>Raman amplifier: Advantage in long–haul (LH) space</li>
</ul>
</li>
<li><p>Improve gain performance at longer signal wavelengths</p>
</li>
</ul>
<h2 id="6-PON"><a href="#6-PON" class="headerlink" title="6 PON"></a>6 PON</h2><ul>
<li>Upstream $1310\pm 50\ \text{nm}$</li>
<li>Downstream $1490\pm 10\ \text{nm}$</li>
</ul>
<h2 id="7-COC"><a href="#7-COC" class="headerlink" title="7 COC"></a>7 COC</h2><p>相干光通信很妙，以后有机会再补。</p>
<ul>
<li><p>PSK</p>
</li>
<li><p>DPSK</p>
<ul>
<li><p>0—No phase change, 1—Phase change</p>
<p>$$<br>\begin{equation}<br>\begin{split}<br>\text{code}\quad b_n&amp;&#x3D;a_n\oplus b_{n-1}\<br>\text{decode}\quad c_n&amp;&#x3D;b_n\oplus b_{n-1}&#x3D;a_n<br>\end{split}<br>\end{equation}<br>$$</p>
</li>
</ul>
</li>
<li><p>QAM</p>
</li>
</ul>
<h2 id="8-OTDM"><a href="#8-OTDM" class="headerlink" title="8 OTDM"></a>8 OTDM</h2><h3 id="Bit-interleaving"><a href="#Bit-interleaving" class="headerlink" title="Bit interleaving"></a>Bit interleaving</h3><a target="_blank" rel="noopener" href="https://tva1.sinaimg.cn/large/008i3skNly1gs7gzv8wcmj313s0lgqad.jpg" title="image-20210630090139406" class="gallery-item"><img src="https://tva1.sinaimg.cn/large/008i3skNly1gs7gzv8wcmj313s0lgqad.jpg" alt="image-20210630090139406" style="zoom:67%;" /></a>

<a target="_blank" rel="noopener" href="https://tva1.sinaimg.cn/large/008i3skNly1gs7h07jbpvj30ze0ksq4q.jpg" title="image-20210630090202854" class="gallery-item"><img src="https://tva1.sinaimg.cn/large/008i3skNly1gs7h07jbpvj30ze0ksq4q.jpg" alt="image-20210630090202854" style="zoom:67%;" /></a>



<h3 id="Packet-interleaving"><a href="#Packet-interleaving" class="headerlink" title="Packet interleaving"></a>Packet interleaving</h3><p><a target="_blank" rel="noopener" href="https://tva1.sinaimg.cn/large/008i3skNly1gs7h0ad0g4j312o0l845r.jpg" title="image-20210630090403300" class="gallery-item"><img src="https://tva1.sinaimg.cn/large/008i3skNly1gs7h0ad0g4j312o0l845r.jpg" alt="image-20210630090403300"></a></p>
<a target="_blank" rel="noopener" href="https://tva1.sinaimg.cn/large/008i3skNly1gs7h0bslkxj30wy0j0gng.jpg" title="image-20210630090537433" class="gallery-item"><img src="https://tva1.sinaimg.cn/large/008i3skNly1gs7h0bslkxj30wy0j0gng.jpg" alt="image-20210630090537433" style="zoom:67%;" /></a>

<ul>
<li><p>packet compression</p>
<a target="_blank" rel="noopener" href="https://tva1.sinaimg.cn/large/008i3skNgy1gs00nsp1u9j31180jwn5c.jpg" title="image-20210630090448559" class="gallery-item"><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs00nsp1u9j31180jwn5c.jpg" alt="image-20210630090448559" style="zoom:67%;" /></a></li>
</ul>
<a target="_blank" rel="noopener" href="https://tva1.sinaimg.cn/large/008i3skNly1gs7h0iiou0j31540u0tqm.jpg" title="image-20210630114816057" class="gallery-item"><img src="https://tva1.sinaimg.cn/large/008i3skNly1gs7h0iiou0j31540u0tqm.jpg" alt="image-20210630114816057" style="zoom:67%;" /></a>

<a target="_blank" rel="noopener" href="https://tva1.sinaimg.cn/large/008i3skNly1gs7h0qci0oj31540u0tqm.jpg" title="image-20210630114834707" class="gallery-item"><img src="https://tva1.sinaimg.cn/large/008i3skNly1gs7h0qci0oj31540u0tqm.jpg" alt="image-20210630114834707" style="zoom:67%;" /></a>

<a target="_blank" rel="noopener" href="https://tva1.sinaimg.cn/large/008i3skNgy1gs05jbadzxj316w0u0juw.jpg" title="image-20210630115330090" class="gallery-item"><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs05jbadzxj316w0u0juw.jpg" alt="image-20210630115330090" style="zoom:67%;" /></a>

<a target="_blank" rel="noopener" href="https://tva1.sinaimg.cn/large/008i3skNgy1gs05jo7y8yj316r0u0jw2.jpg" title="image-20210630115350604" class="gallery-item"><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gs05jo7y8yj316r0u0jw2.jpg" alt="image-20210630115350604" style="zoom:67%;" /></a>

<ul>
<li><p>关键	</p>
<ul>
<li>1格&#x3D;1&#x2F;bit rate</li>
<li>1&#x2F;Packet Pulses</li>
</ul>
</li>
<li><p>未懂</p>
<ul>
<li>Z序列是随机的吗</li>
</ul>
</li>
</ul>
<h1 id="参考阅读"><a href="#参考阅读" class="headerlink" title="参考阅读"></a>参考阅读</h1><p>[1] <a target="_blank" rel="noopener" href="https://youtu.be/BoGg9H_nujo">Quantum Well Explained</a></p>
<p>[2] <a target="_blank" rel="noopener" href="https://youtu.be/HRt0_TlxAl4">Electronic Devices: Bond Model</a></p>
<p>[3] <a target="_blank" rel="noopener" href="https://youtu.be/FVc1S2CO4qg">Electronic Devices: Band Model</a></p>
<p>NRZ: BR&#x3D;2BW</p>
<p>RZ: BR&#x3D;BW</p>
<p>吸收的+偏置功&#x3D;发出的电功率</p>
</div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {
        var options = {
            selector: '.gallery-item'
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);
        }</script> 
      <!-- reward -->
      
      <div id="reword-out">
        <div id="reward-btn">
          Donate
        </div>
      </div>
      
    </div>
    

    <!-- copyright -->
    
    <div class="declare">
      <ul class="post-copyright">
        <li>
          <i class="ri-copyright-line"></i>
          <strong>Copyright： </strong>
          
          Copyright is owned by the author. For commercial reprints, please contact the author for authorization. For non-commercial reprints, please indicate the source.
          
        </li>
      </ul>
    </div>
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/optics/" rel="tag">optics</a></li></ul>

    </footer>
  </div>

   
  <nav class="article-nav">
    
      <a href="/Writing/Scientific-Writing/" class="article-nav-link">
        <strong class="article-nav-caption">上一篇</strong>
        <div class="article-nav-title">
          
            Scientific Writing Notes
          
        </div>
      </a>
    
    
      <a href="/Mathematics/Compressive-Sensing-Notes/" class="article-nav-link">
        <strong class="article-nav-caption">下一篇</strong>
        <div class="article-nav-title">Compressive Sensing Notes</div>
      </a>
    
  </nav>

  
   
     
</article>

</section>
      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2020-2024
        <i class="ri-heart-fill heart_icon"></i> Longqian Huang
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      <li>
        
        
        <span>
  <span><i class="ri-user-3-fill"></i>Visitors:<span id="busuanzi_value_site_uv"></span></span>
  <span class="division">|</span>
  <span><i class="ri-eye-fill"></i>Views:<span id="busuanzi_value_page_pv"></span></span>
</span>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>    
    </main>
    <div class="float_btns">
      <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

    </div>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/cat.png" alt="Peter&#39;s Blog"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/about">关于</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/news">近闻</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/publications">发表</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/projects">项目</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/notes">笔记</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/gallery">画廊</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/friends">友链</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="Search">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>来，请俺喝杯咖啡！</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-3.6.0.min.js"></script>
 
<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->
 
<script src="/js/tocbot.min.js"></script>

<script>
  tocbot.init({
    tocSelector: ".tocbot",
    contentSelector: ".article-entry",
    headingSelector: "h1, h2, h3, h4, h5, h6",
    hasInnerContainers: true,
    scrollSmooth: true,
    scrollContainer: "main",
    positionFixedSelector: ".tocbot",
    positionFixedClass: "is-position-fixed",
    fixedSidebarOffset: "auto",
  });
</script>

<script src="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.js"></script>
<link
  rel="stylesheet"
  href="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.css"
/>
<script src="https://cdn.staticfile.org/justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->
 <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/default-skin/default-skin.min.css">
<script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.js"></script>
<script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script> 
<!-- MathJax -->
 <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
      tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
  });

  MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for(i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
      }
  });
</script>

<script src="https://cdn.staticfile.org/mathjax/2.7.7/MathJax.js"></script>
<script src="https://cdn.staticfile.org/mathjax/2.7.7/config/TeX-AMS-MML_HTMLorMML-full.js"></script>
<script>
  var ayerConfig = {
    mathjax: true,
  };
</script>

<!-- Katex -->

<!-- busuanzi  -->
 
<script src="/js/busuanzi-2.3.pure.min.js"></script>
 
<!-- ClickLove -->

<!-- ClickBoom1 -->

<!-- ClickBoom2 -->

<!-- CodeCopy -->
 
<link rel="stylesheet" href="/css/clipboard.css">
 <script src="https://cdn.staticfile.org/clipboard.js/2.0.10/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>
 
<!-- CanvasBackground -->
 
<script src="/js/dz.js"></script>
 
<script>
  if (window.mermaid) {
    mermaid.initialize({ theme: "forest" });
  }
</script>


    
    

  </div>
</body>

</html>
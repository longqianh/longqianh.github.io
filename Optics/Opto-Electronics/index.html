<!DOCTYPE html>


<html lang="en,zh-CN,default">
  

    <head>
      <meta charset="utf-8" />
        
      <meta
        name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1"
      />
      <title>光电子学笔记 |  Peter&#39;s Blog</title>
  <meta name="generator" content="hexo-theme-ayer">
      
      <link rel="shortcut icon" href="/images/favicon.ico" />
       
<link rel="stylesheet" href="/dist/main.css">

      
<link rel="stylesheet" href="/css/fonts/remixicon.css">

      
<link rel="stylesheet" href="/css/custom.css">
 
      <script src="https://cdn.staticfile.org/pace/1.2.4/pace.min.js"></script>
       
 

      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-bulma@5.0.1/bulma.min.css"
      />
      <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.js"></script>

      <!-- mermaid -->
      
      <style>
        .swal2-styled.swal2-confirm {
          font-size: 1.6rem;
        }
      </style>
    <!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><link rel="alternate" href="/rss2.xml" title="Peter's Blog" type="application/atom+xml">
</head>
  </html>
</html>


<body>
  <div id="app">
    
      
    <main class="content on">
      <section class="outer">
  <article
  id="post-Optics/Opto-Electronics"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h1 class="article-title sea-center" style="border-left:0" itemprop="name">
  光电子学笔记
</h1>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/Optics/Opto-Electronics/" class="article-date">
  <time datetime="2020-10-23T16:45:43.000Z" itemprop="datePublished">2020-10-23</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Notes/">Notes</a> / <a class="article-category-link" href="/categories/Notes/Optics/">Optics</a>
  </div>
  
<div class="word_count">
    <span class="post-time">
        <span class="post-meta-item-icon">
            <i class="ri-quill-pen-line"></i>
            <span class="post-meta-item-text"> Word count:</span>
            <span class="post-count">4.9k</span>
        </span>
    </span>

    <span class="post-time">
        &nbsp; | &nbsp;
        <span class="post-meta-item-icon">
            <i class="ri-book-open-line"></i>
            <span class="post-meta-item-text"> Reading time≈</span>
            <span class="post-count">21 min</span>
        </span>
    </span>
</div>
 
    </div>
      
    <div class="tocbot"></div>




  
    <div class="article-entry" itemprop="articleBody">
       
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><h1 id="Optoelectronics"><a href="#Optoelectronics" class="headerlink" title="Optoelectronics"></a>Optoelectronics</h1><h2 id="Matrix-Optics-「矩阵光学」"><a href="#Matrix-Optics-「矩阵光学」" class="headerlink" title="Matrix Optics 「矩阵光学」"></a>Matrix Optics 「矩阵光学」</h2><h3 id="光学元件的传播矩阵"><a href="#光学元件的传播矩阵" class="headerlink" title="光学元件的传播矩阵"></a>光学元件的传播矩阵</h3><p>小坑待填.</p>
<h3 id="光线在周期系统的位置轨迹"><a href="#光线在周期系统的位置轨迹" class="headerlink" title="光线在周期系统的位置轨迹"></a>光线在周期系统的位置轨迹</h3><p>$$<br>\begin{pmatrix}<br>y_{m+1}\<br>\theta_{m+1}<br>\end{pmatrix}&#x3D;M\begin{pmatrix}<br>y_m\<br>\theta_m<br>\end{pmatrix}<br>$$</p>
<p>其中 $M&#x3D;\displaystyle\begin{pmatrix}A&amp;B \ C&amp;D\end{pmatrix}$ 为周期系统的传播矩阵。</p>
<p>进而得到<br>$$<br>\begin{align}<br>y_{m+1}&amp;&#x3D;Ay_m+B\theta_m\<br>\theta_{m+1}&amp;&#x3D;Cy_m+D\theta_m<br>\end{align}<br>$$<br>整理得<br>$$<br>\begin{align}<br>y_{m+2}&amp;&#x3D;(A+D)y_{m+1}+(BC-AD)y_m \notag\<br>i.e. \quad y_{m+2}&amp;&#x3D;2by_{m+1}-F^2y_m\<br>\end{align}<br>$$</p>
<p>其中 $b&#x3D;(A+D)&#x2F;2,F^2&#x3D;\det (M)$.</p>
<p>尝试解 $y_m&#x3D;y_0h^m$, 可得<br>$$<br>y_m&#x3D;y_0F^me^{\pm im\varphi}<br>$$<br>其中 $\varphi$ 满足 $b&#x3D;F\cos\varphi$.</p>
<p>可见，传递矩阵的 $\det$ 带来幅值增益，其 $\operatorname {trace}$ 带来相位增益。</p>
<span id="more"></span>

<h3 id="谐振腔稳定条件"><a href="#谐振腔稳定条件" class="headerlink" title="谐振腔稳定条件"></a>谐振腔稳定条件</h3><p>可以证明（？） $\det(M)&#x3D;n_i&#x2F;n_f$, 其中 $n_i,n_f$ 分别为系统基本单元初始和最后一部分的折射率。</p>
<p>稳定需要传播的光束不会溢出光学系统，因而需要 $\varphi&#x3D;\arccos(b)$ 为实数：<br>$$<br>|b|\le1\iff\frac{|A+D|}{2}\le 1. \label{stable-cond0}<br>$$<br>对于谐振腔系统：自由空间 $\to$ 透镜2 $\to$ 自由空间 $\to$ 透镜1的周期组合，可得其传递矩阵<br>$$<br>M&#x3D;M_{1}M_dM_2M_d&#x3D;\begin{pmatrix}<br>1-d&#x2F;f_1 &amp; \<br>&amp; -d&#x2F;f_2+(1-d&#x2F;f_2)(1-d&#x2F;f_1)<br>\end{pmatrix},<br>$$<br>根据稳定条件 $(\ref{stable-cond0})$ ,有：<br>$$<br>\begin{align}<br>&amp;0\le1-d&#x2F;f_1-d&#x2F;f_2+d^2&#x2F;2f_1f_2&#x3D; 2(1-d&#x2F;2f_1)(1-d&#x2F;2f_2)-1\le 1\notag<br>\<br>\iff &amp; 0\le \left(1-\frac{d}{2f_1}\right)\left(1-\frac{d}{2f_2}\right)\le 1<br>.<br>\tag{$\star$}<br>\label{stable-cond}<br>\end{align}<br>$$</p>
<p>($\ref{stable-cond}$) 就是谐振腔稳定条件。</p>
<p>对于球面谐振腔，传递矩阵中的 $\displaystyle -\frac{1}{f}$ 换成了 $\displaystyle\frac{2}{R}$，因而稳定条件变为：<br>$$<br>0\le \left(1+\frac{d}{R_1}\right)\left(1+\frac{d}{R_2}\right)\le 1.<br>$$</p>
<h2 id="Gaussian-Beam-「高斯光束」"><a href="#Gaussian-Beam-「高斯光束」" class="headerlink" title="Gaussian Beam 「高斯光束」"></a>Gaussian Beam 「高斯光束」</h2><h3 id="高斯光束的推导"><a href="#高斯光束的推导" class="headerlink" title="高斯光束的推导"></a>高斯光束的推导</h3><p>​		高斯光束是傍轴亥姆霍兹方程的一个试探解。</p>
<h3 id="高斯光束的性质"><a href="#高斯光束的性质" class="headerlink" title="高斯光束的性质"></a>高斯光束的性质</h3><p>波函数<br>$$<br>U(\vec r)&#x3D;\frac{A_1}{iz_0}\frac{W_0}{W(z)}\exp\left[-\frac{\rho^2}{W^2(z)}\right]\exp\left[-ikz-ik\frac{\rho^2}{2R(z)}+i\zeta(z)\right]<br>$$</p>
<p>光强<br>$$<br>I(\rho,z)&#x3D;|U|^2&#x3D;I_0\left[\frac{W_0}{W(z)}\right]^2\exp\left[-\frac{2\rho^2}{W^2(z)}\right]<br>$$</p>
<p>功率<br>$$<br>P&#x3D;\int_0^\infty I(\rho,z)2\pi\rho\text d\rho&#x3D;\frac{1}{2}\pi W_0^2 I_0<br>$$</p>
<h3 id="高斯光束的传播"><a href="#高斯光束的传播" class="headerlink" title="高斯光束的传播"></a>高斯光束的传播</h3><h4 id="ABCD定律"><a href="#ABCD定律" class="headerlink" title="ABCD定律"></a>ABCD定律</h4><p>高斯光束经过一个具有ABCD矩阵的光学系统后的 $q$ 参数：<br>$$<br>q_2&#x3D;\frac{Aq_1+B}{Cq_1+D},<br>$$<br>其中 $q$ 满足<br>$$<br>\frac{1}{q(z)}&#x3D;\frac{1}{R(z)}-j\frac{\lambda}{\pi W^2(z)}.<br>$$</p>
<h2 id="Photon-Optics-「光子光学」"><a href="#Photon-Optics-「光子光学」" class="headerlink" title="Photon Optics 「光子光学」"></a>Photon Optics 「光子光学」</h2><p>Category :</p>
<ul>
<li>Single Photon’s Property</li>
<li>Photon Stream</li>
</ul>
<h3 id="1-Photon-Interference-「单光子干涉」"><a href="#1-Photon-Interference-「单光子干涉」" class="headerlink" title="1. Photon Interference 「单光子干涉」"></a>1. Photon Interference 「单光子干涉」</h3><p>If a histogram of the locations of the detected photon is constructed by repeating the experiment many times, the classical interference pattern obtained by carrying out the experiment only once with a strong beam of light emerges.</p>
<p><strong>单光子干涉的统计规律和经典光波干涉的现象一致。</strong>干涉现象应该是单光子干涉的统计规律的显现，或者说其本质是单光子干涉。</p>
<p>单光子是可以干涉的，这来自光子本身的性质。光子的性质由一个概率波 $\psi$ 描述，当处于两条缝可以选择的叠加态时，$|\psi|^2$ 就会出现干涉项。</p>
<p>我感觉这很数学，很妙，物理学家从现象中挖出了光子的本质。光子不得不是概率波。</p>
<p>参考：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/40343270/answer/111817926">如何解释单光子干涉</a></li>
<li><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/61933450/answer/1225803587">为何单个电子通过双缝会发生干涉？</a></li>
</ul>
<h3 id="2-Photon-Stream-「光子流」"><a href="#2-Photon-Stream-「光子流」" class="headerlink" title="2. Photon Stream 「光子流」"></a>2. Photon Stream 「光子流」</h3><p>光子流中光子的到达是随机的，量子力学成功地找到了这种随机性的来源：不确定性原理。</p>
<p>接下来要对这种随机性进行建模，涉及一些随机过程和数理统计。</p>
<h4 id="描述光子流"><a href="#描述光子流" class="headerlink" title="描述光子流"></a>描述光子流</h4><ul>
<li>平均光子通量密度 $\phi(\vec r)&#x3D;\displaystyle \frac{I(\vec r)}{h\bar\nu}$ ：单位时间单位面积的平均光子数</li>
<li>平均光子通量 $\Phi(\vec r)&#x3D;\int \phi(\vec r)\ \text{d}A&#x3D;\displaystyle\frac{P}{h\bar\nu}$ ：单位时间的平均光子数</li>
<li>平均光子数 $\bar n&#x3D;\int \Phi\ \text{d}t&#x3D;\displaystyle \frac{E}{h\bar\nu}$</li>
</ul>
<p>在频域，用对应的谱密度去描述。</p>
<h4 id="光子流中的到达光子数"><a href="#光子流中的到达光子数" class="headerlink" title="光子流中的到达光子数"></a>光子流中的到达光子数</h4><h5 id="（1）Coherent-Light"><a href="#（1）Coherent-Light" class="headerlink" title="（1）Coherent Light"></a>（1）Coherent Light</h5><p>相干光有恒定的功率。因此有确定的平均光子数，这也是其服从的泊松分布的强度。</p>
<p>为什么光子数分布 $p(n)$ 服从泊松分布？</p>
<p>对于一段时间 $T$, 将其等分为非常多的份数 $N$, 使得每一份时间 $T&#x2F;N$ 里最多出现一个光子。出现一个光子的概率应为 $\bar n&#x2F;N$，整个时间段 $T$ 内出现 $n$ 个光子的概率就服从二项分布：<br>$$<br>p(n)&#x3D;C_N^n(\bar n&#x2F;N)^n(1-\bar n&#x2F;N)^{N-n}<br>$$<br>$N\to \infty$, 二项分布成为 Poisson 分布：<br>$$<br>p(n)&#x3D;\frac{\bar n^n e^{-\bar n}}{n!}<br>$$</p>
<h5 id="（2）Thermal-Light"><a href="#（2）Thermal-Light" class="headerlink" title="（2）Thermal Light"></a>（2）Thermal Light</h5><p>对于热光，要考虑热平衡条件下的分布—玻尔兹曼分布。</p>
<p><em>Boltzmann Distribution</em>：gives the probability that a system will be in a certain state as a function of that state’s energy.</p>
<p>（推导）The Boltzmann distribution is the distribution that maximizes the entropy<br>$$<br>H(p_1,p_2,\dots,p_M)&#x3D;-\sum_{i&#x3D;1}^Mp_i\log_2 p_i<br>$$<br>subject to the constraint that $\sum p_i\varepsilon_i$ equals a particular mean energy value.</p>
<p>热平衡条件下的熵应为最大，由此导出玻尔兹曼分布：<br>$$<br>p_i\propto e^{-\varepsilon_i&#x2F;kT}<br>$$<br>即处于粒子状态 $i$ 的概率与状态 $i$ 的能量 $\varepsilon_i$ 的关系。</p>
<p>对于光子流，其光子数的分布为：<br>$$<br>p(n)\propto \left[\exp\left(-\frac{nh\nu}{kT}\right)\right]^n\label{photon-dis-boltz}<br>$$<br>由 $\bar n&#x3D;\sum np(n)$ 得到<br>$$<br>\bar n&#x3D;\frac{1}{\exp(h\nu&#x2F;kT)-1}<br>$$<br>将其带入 ($\ref{photon-dis-boltz}$)，得到 Bose-Einstein 分布：<br>$$<br>p(n)&#x3D;\frac{1}{\bar n+1}\left(\frac{\bar n}{\bar n+1}\right)^n.<br>$$</p>
<p>作为一个应用，热平衡时（求解速率方程时的热平衡条件）：<br>$$<br>\frac{N_2}{N_1}&#x3D;\exp\left(-\frac{E_2-E_1}{k_B T}\right)&#x3D;\exp\left(-\frac{h\nu}{k_B T}\right).<br>$$</p>
<h5 id="（3）坑待填"><a href="#（3）坑待填" class="headerlink" title="（3）坑待填"></a>（3）坑待填</h5><ul>
<li>doubly stochastic Poisson process (DSPP)</li>
<li>quantum states of light<ul>
<li>Two-Photon Optics</li>
</ul>
</li>
</ul>
<h2 id="Light-and-Matter"><a href="#Light-and-Matter" class="headerlink" title="Light and Matter"></a>Light and Matter</h2><h3 id="1-跃迁与辐射"><a href="#1-跃迁与辐射" class="headerlink" title="1. 跃迁与辐射"></a>1. 跃迁与辐射</h3><p>需要对原子的辐射、跃迁进行完整的建模。</p>
<p>接下来进行宏观的分析。</p>
<ul>
<li>自发辐射寿命</li>
</ul>
<p>设单位时间内自发辐射概率密度为 $\operatorname P_{sp}$，即 $1s$ 辐射 $\operatorname{P}<em>{sp}$ 个光子，因此光子的自发辐射寿命<br>$$<br>t</em>{sp}&#x3D;\frac{1}{\operatorname{P}_{sp}}<br>$$<br>即每个光子辐射出来“平均”需要多少 $s$。</p>
<p>事实上: $\text dN&#x2F;\text dt&#x3D;-Np_{sp}\implies N&#x3D;e^{-p_{sp}t}$, $t_{sp}$ 为粒子数减小为原来 $1&#x2F;e$ 时的时间间隔。</p>
<ul>
<li>跃迁截面</li>
</ul>
<p>跃迁截面可以看作有效作用面积：<br>$$<br>\sigma(\nu)&#x3D;Sg(\nu),\quad \int_0^\infty g(\nu)\text d\nu&#x3D;1<br>$$<br>$S$ 为相互作用强度，$g(\nu)$ 为线型函数。</p>
<p>对洛伦兹线形，有 $g(\nu_0)&#x3D;2&#x2F;(\pi\Delta \nu)$, $\Delta\nu&#x3D;1&#x2F;2\pi t_{sp}$</p>
<ul>
<li>辐射概率密度</li>
</ul>
<p>对自发辐射、吸收和受激辐射<strong>（怎么来的？）</strong>：<br>$$<br>\begin{align}<br>\operatorname p_{sp}&amp;&#x3D;\frac{c}{V}\sigma(\nu)\<br>\operatorname P_{ab}&amp;&#x3D;\bar n\frac{c}{V}\sigma(\nu)\<br>\operatorname P_{st}&amp;&#x3D;\bar n\frac{c}{V}\sigma(\nu)<br>\end{align}<br>$$<br>其中 $\bar n$ 为相互作用过程中的(平均)光子数。</p>
<p>注意三个 $\sigma$ 其实有所不同，自发辐射要对 $\theta$ 取平均，受激辐射则是特定的角度 $\theta_0$.</p>
<p>一般光子自发辐射寿命可测，由此可去算 $S$：<br>$$<br>\begin{align}<br>\operatorname P_{sp}&amp;&#x3D;\int_0^\infty \left[\frac{c}{V}\sigma(\nu)\right]\left[VM(\nu)\right]\text d \nu\approx M(\nu_0)cS\<br>\implies &amp; S&#x3D;\frac{\lambda^2}{8\pi t_{sp}}</p>
<p>\end{align}<br>$$</p>
<ul>
<li><p>受激辐射概率密度</p>
<p>用 $W_i$ 表示吸收概率密度，也等于受激辐射概率密度，$W_i&#x3D;\bar n&#x2F;t_{sp}$, 概率密度的单位为 $s^{-1}$。</p>
<p>对于单频光：$n&#x3D;\phi V&#x2F;c$<br>$$<br>W_i&#x3D;\operatorname P_{st}&#x3D;P_{ab}&#x3D;\phi \cdot \sigma(\nu)<br>$$<br>对于宽频光：需知道其光谱能量密度 $\rho(\nu)$<br>$$<br>\begin{align}<br>W_i&amp;&#x3D;\int_0^\infty n(\nu)\operatorname P_{st}(\nu)\text d\nu&#x3D;\int_0^\infty \left[\rho(\nu)V\text d \nu\right&#x2F;h\nu]\left[\frac{c}{V}\sigma(nu)\right]\<br>&amp;\approx \frac{\bar n}{t_{sp}}<br>\end{align}<br>$$<br>其中  $\bar n&#x3D;\displaystyle\frac{\lambda_0^3}{8\pi h}\rho(\nu_0)&#x3D;\frac{cS\operatorname P_{sp}\rho(\nu_0)}{h\nu_0}$ 代表<strong>每个模式的平均光子数</strong>。</p>
</li>
<li><p>爱因斯坦系数</p>
<p>$$<br>\begin{align}<br>P_{sp}&amp;&#x3D;\mathbb{A}\<br>W_i&amp;&#x3D;\mathbb{B} \rho(\nu_0)<br>\end{align}<br>$$<br>其中 $\rho(\nu)$ 为光谱能量密度，$\mathbb{A},\mathbb{B}$ 为爱因斯坦系数，有：<br>$$<br>\mathbb{A}&#x3D;\frac{1}{t_{sp}},\mathbb{B}&#x3D;\frac{\lambda^3}{8\pi ht_{sp}}.<br>$$</p>
</li>
</ul>
<h3 id="2-速率方程"><a href="#2-速率方程" class="headerlink" title="2. 速率方程"></a>2. 速率方程</h3><p>我们需要描述泵浦作用下原子内部的跃迁情况，这相当于原子辐射和跃迁的微观分析。</p>
<p>设泵源使得的由下能级跃迁到能级2的速率为 $R_2$,（单位时间单位体积的粒子数） 从能级1跃迁到其他能级的速率为 $R_1$。</p>
<p>由跃迁速率和能级寿命的反比关系，能级寿命 $\tau_2^{-1}&#x3D;\tau_{21}^{-1}+\tau_{20}^{-1}$, $\tau_{21}^{-1}&#x3D;\tau_{sp}^{-1}+\tau_{nr}^{-1}$, $\tau_{nr}$ 为非辐射跃迁成分。</p>
<p>不考虑辐射时，有：<br>$$<br>\begin{align}<br>\frac{\text dN_2}{\text dt}&amp;&#x3D;R_2-\frac{N_2}{\tau_2}\<br>\frac{\text dN_1}{\text d t}&amp;&#x3D;-R_1-\frac{N_1}{\tau_1}+\frac{N_2}{\tau_{21}}<br>\end{align}<br>$$<br>稳态条件下（ $\text dN&#x2F;\text d t&#x3D;0$ ）解得无辐射时稳态粒子数差<br>$$<br>N_0&#x3D;R_2\tau_2(1-\frac{\tau_1}{\tau_{21}})+R_1\tau_1<br>$$</p>
<p>考虑辐射时：<br>$$<br>\begin{aligned}<br>\frac{\text dN_2}{\text dt}&amp;&#x3D;R_2-\frac{N_2}{\tau_2}+N_1W_i-N_2W_i\<br>\frac{\text dN_1}{\text d t}&amp;&#x3D;-R_1-\frac{N_1}{\tau_1}+\frac{N_2}{\tau_{21}}-N_1W_i+N_2W_i<br>\end{aligned}<br>$$<br>稳态条件下解得：<br>$$<br>N&#x3D;\frac{N_0}{1+\tau_sW_i} \label{sat}<br>$$<br>这就意味着随着<strong>辐射变强</strong>（增加输入光子流密度，“用光直接泵浦”），$W_i$ 增大，反转粒子数出现饱和。其中 $\tau_s&#x3D;\tau_2+\tau_1(1-\displaystyle\frac{\tau_2}{\tau_{21}})$ 。</p>
<p>对于四能级泵浦机制，外部的能量源以速率 $R$ 将原子从能级0泵浦到能级3，有以下假设：</p>
<ul>
<li><p>能级1和能级3是短寿命的 $N_1\approx N_3\approx 0$</p>
</li>
<li><p>能级3到能级2的衰减非常快 $R_2&#x3D;R$</p>
</li>
<li><p>能级1没有原子泵浦进入和流出 $R_1&#x3D;0$</p>
</li>
<li><p>能级2和能级1之间的 <em>非辐射跃迁</em> 一般可以忽略 $\tau_{20}\gg t_{sp}\gg \tau_1 \implies \tau_s\approx t_{sp}$</p>
</li>
</ul>
<p>三能及泵浦机制抽去了四能级机制中基态能级和长寿命能级2度中间级，它有以下假设：</p>
<ul>
<li>3—1衰减很慢，3—2衰减很快 $\tau_{32}\ll \tau_{31}$ $\implies \tau_2&#x3D;\tau_{21},\tau_1&#x3D;\infty$</li>
<li>能级3寿命很短 $N_a&#x3D;N_1+N_2$</li>
<li>能级2和能级1之间的非辐射跃迁可忽略 $t_{sp}\ll t_{nr}$ （速率很慢）</li>
</ul>
<p>由此重新求解速率方程，得到 $\tau_s\approx 2t_{sp}$ .</p>
<h4 id="光子数密度的速率方程"><a href="#光子数密度的速率方程" class="headerlink" title="光子数密度的速率方程"></a>光子数密度的速率方程</h4><p>$$<br>\frac{\text d n}{\text d t}&#x3D;-\frac{n}{\tau_p}+NW_i<br>$$</p>
<p>注意 $NW_i&#x3D;N_2W_i-N_1W_i&#x3D;N_2P_{st}-N_1P_{ab}$ 是由二能级的受激辐射（原子接收光子再双倍产生光子）和一能级的吸收（低能级原子接收光子）组成的。</p>
<h2 id="Laser-Theory-「激光器机理」"><a href="#Laser-Theory-「激光器机理」" class="headerlink" title="Laser Theory 「激光器机理」"></a>Laser Theory 「激光器机理」</h2><p>激光泵浦提供了一个初始反转粒子数 $N_0$, 由泵浦速率 $R$ 和相关光子能级寿命计算得到。</p>
<p>这个初始反转粒子数如果高于阈值$N_t$, 有 $\gamma_0&#x3D;N_0\sigma&gt;\alpha_r&#x3D;N_t\sigma$ ，激光开始振荡，腔内光子流密度不断增加（增加原因：受激辐射大？）。</p>
<p>光子流密度增加过程中，光子原子相互作用会消耗反转粒子数 $N$，腔内增益系数 $\gamma&#x3D;N\sigma$ 随着 $N$ 的消耗而逐渐趋于饱和，这个过程中腔内光子流密度不断增加但增加速率逐渐降低。</p>
<p>最后增益系数钳位到损耗吸数，激光器进入稳态，腔内光子流密度达到最大值，反转粒子数降低到稳态值 $N_t$。</p>
<h3 id="1-增益饱和"><a href="#1-增益饱和" class="headerlink" title="1. 增益饱和"></a>1. 增益饱和</h3><ul>
<li>增益系数</li>
</ul>
<p>单位时间光子数净增量（只有受激辐射才会贡献净增量，因而只需要算 $N\cdot W_i$）：<br>$$<br>\begin{align}<br>\text d\phi&amp;&#x3D;(N_2-N_1)W_i\cdot \text dz&#x3D;NW_i\text dz\<br>\implies \frac{\text d\phi(z)}{\text d z}&amp;&#x3D;NW_i&#x3D;N\phi(z)\sigma(\nu):&#x3D;\gamma(\nu)\phi(z)\<br>\phi(z)&amp;&#x3D;\phi(0)e^{\gamma(\nu)z}, I(z)&#x3D;I(0)e^{\gamma(\nu)z}</p>
<p>\end{align}<br>$$<br>由此，激光介质的增益系数<br>$$<br>\gamma(\nu)&#x3D;N\sigma(\nu)<br>$$</p>
<ul>
<li>增益饱和</li>
</ul>
<p>小信号增益系数<br>$$<br>\gamma_0(\nu)&#x3D;N_0\sigma(\nu)&#x3D;N_0\frac{\lambda^2}{8\pi t_{sp}}g(\nu)<br>$$<br>由反转粒子数 $N$ 存在饱和 ($\ref{sat}$) 以及跃迁截面的不变性，有：</p>
<p>饱和放大增益系数<br>$$<br>\gamma(\nu)&#x3D;\frac{\gamma_0(\nu)}{1+\phi&#x2F;\phi_s}<br>$$</p>
<p>其中饱和光子流密度<br>$$<br>\phi_s&#x3D;\frac{1}{\tau_s\sigma(\nu)}<br>$$</p>
<p>在四能级系统中 $\tau_s\approx t_{sp}$, 三能级系统中 $\tau_s\approx 2t_{sp}$。增益饱和本质上是光子与介质作用耗空反转粒子数的结果。</p>
<p>由于 $I&#x3D;h\nu\phi$, 有<br>$$<br>\gamma(\nu)&#x3D;\frac{\gamma_0(\nu)}{1+I&#x2F;I_s}.<br>$$</p>
<ul>
<li><p>总增益</p>
<p>通过求解<br>$$<br>\frac{\text d\phi}{\text d z}&#x3D;\frac{\gamma_0\phi}{1+\phi&#x2F;\phi_s}<br>$$<br>可以得到输出光子流密度 $\phi(d)$ 与输入光子流密度 $\phi(0)$ 的关系。</p>
<p>在确定增益系数 $\gamma$ 后，由<br>$$<br>G&#x3D;e^{(\gamma-\alpha_r) d}<br>$$<br>得到总增益。如果是宽频光入射，则需对频率进行积分：<br>$$<br>G&#x3D;\frac{1}{2\Delta \nu}\int_{\nu_0-\Delta \nu}^{\nu_0+\Delta\nu}e^{[\gamma(\nu)-\alpha_r]d}\text d \nu<br>$$</p>
</li>
<li><p>相移</p>
<p>（不明白）<br>$$<br>H(\nu)&#x3D;\frac{1}{2}\gamma(\nu)-i\varphi(\nu)<br>$$<br>放大器系统传递函数的实部和虚部满足希尔伯特变换的关系，由此推出<br>$$<br>\phi(\nu)&#x3D;\frac{\nu-\nu_0}{\Delta\nu}\gamma(\nu)<br>$$</p>
</li>
</ul>
<h3 id="2-反馈与损耗"><a href="#2-反馈与损耗" class="headerlink" title="2. 反馈与损耗"></a>2. 反馈与损耗</h3><p>首先描述一个光学谐振腔，有模式间隔、细度、光谱半宽度、腔内光子寿命、品质因子。</p>
<p>对于一个光学谐振腔，腔内光子寿命<br>$$<br>\tau_p&#x3D;\frac{1}{\alpha_r c}<br>$$<br>其中 $\alpha_r$ 为光学谐振腔的总衰减系数：<br>$$<br>\begin{align}<br>\alpha_r&amp;&#x3D;\alpha_s+\alpha_{m1}+\alpha_{m2}<br>\<br>&amp;&#x3D;\alpha_s+\frac{1}{2d}\ln\frac{1}{R_1}+\frac{1}{2d}\ln\frac{1}{R_2}<br>\end{align}<br>$$<br>其中 $\alpha_s$ 为分布是损耗的衰减系数，光沿谐振腔来回一周时有：<br>$$<br>\phi(z+2d)&#x3D;\phi(z)e^{-\alpha_r2d}&#x3D;\phi(0)R_1R_2e^{-\alpha_s2d}<br>$$</p>
<h3 id="3-激光振荡条件"><a href="#3-激光振荡条件" class="headerlink" title="3. 激光振荡条件"></a>3. 激光振荡条件</h3><ul>
<li>增益条件：</li>
</ul>
<p>激光振荡的 <em>启动</em> 必须满足小信号增益大于损耗系数：<br>$$<br>\begin{align}<br>&amp;\gamma_0(\nu)&gt;\alpha_r\<br>\implies &amp;N_0&gt;\frac{\alpha_r}{\sigma(\nu)}:&#x3D;N_t</p>
<p>\end{align}<br>$$</p>
<p>其中：<br>$$<br>N_t&#x3D;\frac{\alpha_r}{\sigma(\nu)}<br>$$</p>
<p>为阈值反转粒子数差，决定了激光振荡能够启动的最小泵浦速率 $R_t$。</p>
<ul>
<li>位相条件：<br>$$<br>2kd+2\phi(\nu)d&#x3D;2\pi q,\quad q&#x3D;1,2,\dots<br>$$<br>可得冷腔频率 $\nu_q$ 被拉向中心频率 $\nu_0$：<br>$$<br>\nu&#x3D;\nu_q-\frac{c}{2\pi}\frac{\nu-\nu_0}{\Delta \nu}\gamma(\nu)<br>$$</li>
</ul>
<h3 id="4-激光输出特性"><a href="#4-激光输出特性" class="headerlink" title="4. 激光输出特性"></a>4. 激光输出特性</h3><h4 id="稳态情况"><a href="#稳态情况" class="headerlink" title="稳态情况"></a>稳态情况</h4><p>激光振荡启动后，随着反转粒子数的耗空，将出现增益饱和，光子流密度停止增长，激光振荡由此达到稳态。</p>
<p>根据<br>$$<br>\frac{\gamma_0(\nu)}{1+\phi&#x2F;\phi_s}&#x3D;\alpha_r<br>$$<br>可以确定饱和时<strong>腔内的光子流密度</strong>:<br>$$<br>\phi&#x3D;\begin{cases}\displaystyle\phi_s(\nu)\left[\frac{\gamma_0(\nu)}{\alpha_r}-1\right],&amp;&amp; \gamma_0(\nu)&gt;\alpha_r\<br>0,&amp;&amp;\gamma_0(\nu)\le\alpha_r<br>\end{cases}<br>$$<br>或<br>$$<br>\phi&#x3D;\begin{cases}\displaystyle\phi_s(\nu)\left[\frac{N_0}{N_t}-1\right],&amp;&amp; N0&gt;N_t\<br>0,&amp;&amp;N_0\le N_t<br>\end{cases}<br>$$<br>注意小信号增益系数 $\gamma_0(\nu)&#x3D;N_0\sigma(\nu)$, 而不是 $N\sigma(\nu)$, 这是因为 $\gamma_0$ 是不考虑饱和情况时的增益系数，对应着无辐射时的粒子数差 $N_0$ ，考虑辐射时的粒子数差 $N$ 将出现饱和。</p>
<p>内部的光子数密度为：<br>$$<br>n&#x3D;\frac{\phi}{c}.<br>$$<br>稳态情况下总的光子密度损失率（由 $\tau_p$ 造成）等于超额的泵浦速率 $R-R_t$:<br>$$<br>\frac{n}{\tau_p}&#x3D;\frac{N_0-N_t}{\tau_s}\approx R-\frac{N_t}{t_{sp}}:&#x3D;R-R_t<br>$$</p>
<h4 id="输出情况"><a href="#输出情况" class="headerlink" title="输出情况"></a>输出情况</h4><ul>
<li>输出光子流密度为</li>
</ul>
<p>$$<br>\phi_0&#x3D;\frac{T\phi}{2}<br>$$</p>
<ul>
<li>激光输出强度为</li>
</ul>
<p>$$<br>I_0&#x3D;h\nu\cdot\phi_0<br>$$</p>
<ul>
<li>激光输出功率为</li>
</ul>
<p>$$<br>P&#x3D;I_0A<br>$$</p>
<p>$A$ 为激光束到截面。</p>
<p>需要指出的一点是，输出光子流密度可以优化（存在极大值），存在一个最佳透射率 $T$ 使激光的输出强度（～输出光子流密度）最大。</p>
<h3 id="5-选频"><a href="#5-选频" class="headerlink" title="5. 选频"></a>5. 选频</h3><p>如果在腔内用F-P标准具进行选频，则需要：<br>$$<br>\begin{align}<br>\nu_F’&amp;\ge B\<br>\delta \nu’&amp;\ge\nu_F<br>\end{align}<br>$$<br>其中 $B$ 为增益系数等于损耗系数所确定的带宽，$\nu_F’,\delta\nu’$ 均为 F-P 标准具的特性参数。</p>
<p>另外，标准具放在腔内显然较好，因为放在腔外会损失掉未选中频率的能量。</p>
<h3 id="6-调Q激光器"><a href="#6-调Q激光器" class="headerlink" title="6. 调Q激光器"></a>6. 调Q激光器</h3><h3 id="7-关于锁模"><a href="#7-关于锁模" class="headerlink" title="7. 关于锁模"></a>7. 关于锁模</h3><p>多模输出的光中可分解出多个频率分量，即多种模式。这些模式的光相位不同，非常杂乱，叠加输出的结果是得到一个均值强度的光。这给人一种浪费的感觉，锁模技术是将这些模式的光相位锁成一致，进而使之干涉增强。这样得到的激光将是一个序列脉冲，更加纯净，强度和频率也都非常可以。</p>
<p>经过干涉叠加的计算（留坑），锁模脉冲序列的时间间隔<br>$$<br>T_F&#x3D;\frac{2d}{c},<br>$$<br>脉冲宽度（半高全宽）<br>$$<br>\tau_{pulse}&#x3D;\frac{T_F}{M},<br>$$<br>平均强度和峰值强度<br>$$<br>\begin{align}<br>\bar I&amp;&#x3D;M|A|^2,\<br>I_p&amp;&#x3D;M^2|A|^2&#x3D;M\bar I.<br>\end{align}<br>$$</p>
<h3 id="8-烧孔"><a href="#8-烧孔" class="headerlink" title="8. 烧孔"></a>8. 烧孔</h3><h4 id="空间烧孔"><a href="#空间烧孔" class="headerlink" title="空间烧孔"></a>空间烧孔</h4><p>考虑在谐振腔中以中心频率振荡的驻波模式。在峰值处光强最大，$N&#x3D;N_0&#x2F;[1+\phi&#x2F;\phi_s]$ 最小, 而在中心模式的波节处光强最小，$N$ 很大。</p>
<p>波节处的 $N$ 还可以再维持一个模式的振荡，从而形成多摸振荡，造成 $\gamma-\nu$ 图上的烧孔，这便是空间烧孔。</p>
<h4 id="光谱烧孔"><a href="#光谱烧孔" class="headerlink" title="光谱烧孔"></a>光谱烧孔</h4><p>增益介质含有多原子时，存在不同模式的振荡，在增益饱和处增益最小，形成 $\gamma-\nu$ 图上的烧孔，这是光谱烧孔。</p>
<h2 id="discussion-amp-questions"><a href="#discussion-amp-questions" class="headerlink" title="discussion&amp;questions"></a>discussion&amp;questions</h2><ul>
<li>烧孔？</li>
</ul>
<p>$$<br>\gamma_0-\gamma_s&#x3D;\gamma_0-\frac{\gamma_0}{1+\phi&#x2F;\phi_s}<br>$$</p>
<ul>
<li>5.7 如果激光被泵浦了，但是泵浦强度不足以产生激光振荡</li>
</ul>
<h4 id="Remark"><a href="#Remark" class="headerlink" title="Remark"></a>Remark</h4><ul>
<li>EDFA是光泵浦</li>
<li>LD是电泵浦</li>
</ul>
<h4 id="Q"><a href="#Q" class="headerlink" title="Q"></a>Q</h4><ul>
<li><p>增益介质的作用？</p>
<p>产生光子。</p>
</li>
</ul>
<h2 id="Acousto-Optics"><a href="#Acousto-Optics" class="headerlink" title="Acousto Optics"></a>Acousto Optics</h2><p>布拉格方程 (Bragg Condication) ：<br>$$<br>\sin\theta_{\mathcal{B}}&#x3D;\frac{\lambda}{2\Lambda}<br>$$<br>其中：</p>
<ul>
<li><p>$\Lambda$ 为声波在介质中的波长，由声波在介质中的速度 $v_s$ 计算：$\Lambda&#x3D;v_s&#x2F;f$</p>
</li>
<li><p>$\lambda$ 为光波在介质中的波长，$\lambda&#x3D;\lambda_0&#x2F;n$</p>
</li>
<li><p>$\theta_{\mathcal{B}}$ 为介质内部的反射角 (this angle is internal), 出射角还要再进行一次折射：$\theta_{\mathcal{B}}’\approx n\theta_{\mathcal{B}}$ ; 入射角也应该由 $\theta_{\mathcal{B}}$ 计算得到</p>
</li>
<li><p>$\theta_{\mathcal{B}}$ 是很小的，因此为掠入射，一般从晶体两侧出光，而不是上下</p>
</li>
</ul>
<h2 id="Waveguide-Optics-「导波光学」"><a href="#Waveguide-Optics-「导波光学」" class="headerlink" title="Waveguide Optics 「导波光学」"></a>Waveguide Optics 「导波光学」</h2><h3 id="Waveguide-Modes"><a href="#Waveguide-Modes" class="headerlink" title="Waveguide Modes"></a>Waveguide Modes</h3><p>Planar-Mirror Waveguides:</p>
<a target="_blank" rel="noopener" href="https://tva1.sinaimg.cn/large/008eGmZEly1gonucjkv3wj30jx09btew.jpg" title="image-20210318101832542" class="gallery-item"><img src="https://tva1.sinaimg.cn/large/008eGmZEly1gonucjkv3wj30jx09btew.jpg" alt="image-20210318101832542" style="zoom: 67%;" /></a>

<p>光在平面波导中传播，反射两次应该和原光波重合，因此为满足这样的自洽性，只有特定入射角 $\theta$ 的模式的光可以留下来：<br>$$<br>\frac{2\pi}{\lambda}2d\sin\theta&#x3D;m\cdot 2\pi\implies\sin\theta_m&#x3D;m\frac{\lambda}{2d}<br>$$<br>于是有 <em>Transverse Component</em> $k_{ym}$ 和 <em>Propagation Constants</em> $\beta_m$:<br>$$<br>\begin{aligned}<br>k_{ym}&amp;&#x3D;k\sin\theta_m&#x3D;m\frac{\pi}{d},\<br>\beta_m^2&amp;&#x3D;k\cos\theta_m&#x3D;k^2-\frac{m^2\pi^2}{d^2}.<br>\end{aligned}<br>$$</p>
<p>Each mode can be viewed as a standing wave in the $y$ directoin, traveling in the $z$ direction.</p>
<p>有了波导的模式（由上面几何光学的方法求得，复杂波导应该借助电动力学），就可以写出其中传播的电磁波：<br>$$<br>\vec E&#x3D;A_m\exp(-jk_{ym}y-j\beta_mz)<br>$$<br>或（？）<br>$$<br>\vec E&#x3D;e^{j(m-1)\pi}\cdot A_m\exp(jk_{ym}y-j\beta_mz)<br>$$</p>
</div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {
        var options = {
            selector: '.gallery-item'
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);
        }</script> 
      <!-- reward -->
      
      <div id="reword-out">
        <div id="reward-btn">
          Donate
        </div>
      </div>
      
    </div>
    

    <!-- copyright -->
    
    <div class="declare">
      <ul class="post-copyright">
        <li>
          <i class="ri-copyright-line"></i>
          <strong>Copyright： </strong>
          
          Copyright is owned by the author. For commercial reprints, please contact the author for authorization. For non-commercial reprints, please indicate the source.
          
        </li>
      </ul>
    </div>
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/optics/" rel="tag">optics</a></li></ul>

    </footer>
  </div>

   
  <nav class="article-nav">
    
      <a href="/Optics/LADAR/" class="article-nav-link">
        <strong class="article-nav-caption">上一篇</strong>
        <div class="article-nav-title">
          
            LADAR System Design「激光雷达系统设计」
          
        </div>
      </a>
    
    
      <a href="/Project/3D-Holography/" class="article-nav-link">
        <strong class="article-nav-caption">下一篇</strong>
        <div class="article-nav-title">3D-Holography</div>
      </a>
    
  </nav>

  
   
     
</article>

</section>
      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2020-2024
        <i class="ri-heart-fill heart_icon"></i> Longqian Huang
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      <li>
        
        
        <span>
  <span><i class="ri-user-3-fill"></i>Visitors:<span id="busuanzi_value_site_uv"></span></span>
  <span class="division">|</span>
  <span><i class="ri-eye-fill"></i>Views:<span id="busuanzi_value_page_pv"></span></span>
</span>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>    
    </main>
    <div class="float_btns">
      <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

    </div>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/cat.png" alt="Peter&#39;s Blog"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/about">关于</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/news">近闻</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/publications">发表</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/projects">项目</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/notes">笔记</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/gallery">画廊</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/friends">友链</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="Search">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>来，请俺喝杯咖啡！</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-3.6.0.min.js"></script>
 
<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->
 
<script src="/js/tocbot.min.js"></script>

<script>
  tocbot.init({
    tocSelector: ".tocbot",
    contentSelector: ".article-entry",
    headingSelector: "h1, h2, h3, h4, h5, h6",
    hasInnerContainers: true,
    scrollSmooth: true,
    scrollContainer: "main",
    positionFixedSelector: ".tocbot",
    positionFixedClass: "is-position-fixed",
    fixedSidebarOffset: "auto",
  });
</script>

<script src="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.js"></script>
<link
  rel="stylesheet"
  href="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.css"
/>
<script src="https://cdn.staticfile.org/justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->
 <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/default-skin/default-skin.min.css">
<script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.js"></script>
<script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script> 
<!-- MathJax -->
 <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
      tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
  });

  MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for(i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
      }
  });
</script>

<script src="https://cdn.staticfile.org/mathjax/2.7.7/MathJax.js"></script>
<script src="https://cdn.staticfile.org/mathjax/2.7.7/config/TeX-AMS-MML_HTMLorMML-full.js"></script>
<script>
  var ayerConfig = {
    mathjax: true,
  };
</script>

<!-- Katex -->

<!-- busuanzi  -->
 
<script src="/js/busuanzi-2.3.pure.min.js"></script>
 
<!-- ClickLove -->

<!-- ClickBoom1 -->

<!-- ClickBoom2 -->

<!-- CodeCopy -->
 
<link rel="stylesheet" href="/css/clipboard.css">
 <script src="https://cdn.staticfile.org/clipboard.js/2.0.10/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>
 
<!-- CanvasBackground -->
 
<script src="/js/dz.js"></script>
 
<script>
  if (window.mermaid) {
    mermaid.initialize({ theme: "forest" });
  }
</script>


    
    

  </div>
</body>

</html>
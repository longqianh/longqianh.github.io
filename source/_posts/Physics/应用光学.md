---
title: 应用光学
date: 2020-03-02 09:47:18
tags:
categories:
- Physics
---

# 应用光学 整理

## 1. 几何光学基础

- 全反射
  $$
  I=\arcsin{\frac{n_2}{n_1}}
  $$
  
- 矢量形式的折射定律
  $$
  \vec A'=\vec A+P\vec N\\
  $$
  其中：
  $$
  \begin{aligned}
  P&=(\vec A'-\vec A)\cdot \vec N\\
  &=n'\cos I'-n\cos I\\
  &=\sqrt{n'^2-n^2\sin ^2 I}-n\cos I
  \end{aligned}
  $$
  且 $\vec A,\vec A’$ 均为单位向量

- 矢量形式的反射定律
  $$
  \vec A'=\vec A-2(\vec N\cdot \vec A)\vec N
  $$



- 光程

  ​	光在介质中所经过的几何路径与该介质折射率的乘积。相当于光在介质中走过路程的时间内，在真空中所走的几何路程。
  $$
  \notag
   s=nl=ct
  $$
  
- 完善成像

  ​	等光程上完善成像的物理条件。



## 2. 球面与球面系统

### 单个球面镜成像

- 基本公式
  $$
  \begin{aligned}
  &\frac{n'}{l'}-\frac{n}{l}=\frac{n'-n}{r}\\
  &n'u'-nu=\frac{n'-n}{r}h
  \end{aligned}
  $$
  
- 光焦度
  $$
  \phi=\frac{n'-n}{r}=\frac{n'}{f'}=\frac{n}{f}
  $$
  
- 放大率

  - 横向
    $$
    \beta=\frac{y'}{y}=\frac{l'-r}{l-r}=\frac{nl'}{n'l}
    $$
    

    $\beta>0$ : 虚实不同；$\beta<0$ : 虚实相同。

    

  - 轴向
    $$
    \alpha=\frac{dl'}{dl}=\frac{nl'^2}{nl^2}
    $$
    反应像与物的沿轴移动量之比。

    

  - 角度
    $$
    \gamma=\frac{u'}{u}=\frac{l}{l'}=\frac{n}{n'}\frac{1}{\beta}
    $$
  
- 关系
    $$
    \alpha\gamma=\beta
    $$
    



- 不变量

  - 阿贝不变量
    $$
    Q=n(\frac{1}{l}-\frac{1}{r})=n'(\frac{1}{l'}-\frac{1}{r'})
    $$
阿贝不变量表征界面对某物点发出光线的偏折能力.
    
  
    
  - 拉赫不变量
  
  $$
  J=nyu=n'y'u'
  $$
  ​		  推导：
  $$
  \notag
  \beta=\frac{y'}{y}=\frac{nl'}{n'l}=\frac{nu}{n'u'}\implies nyu=n'y'u'
  $$
  
    ​		$J$ 大，成像范围大，成像孔径角大，传输光能多。
  
  ​	  	拉赫不变量表征光学系统的成像能力.




### 反射球面（球面镜）

- $n’=-n$





## 3. 平面和平面系统

### 平面镜

- 奇次反射成镜像，偶次反射成一致像
- 若反射光线不动，平面镜转 $\alpha$ 角，则反射光线转 $2\alpha$ 角



### 双平面镜

- 夹角为 $\alpha$ 的双平面镜系统，物与二次反射后所成像的夹角为 $2\alpha$ .
- 入射光线与反射光线的夹角为 $2\alpha$ .



### 平行平板

- 近轴横向位移公式
  $$
  \Delta l'=d(1-\frac{1}{n})
  $$



- 近轴纵向位移公式
  $$
  \Delta t'=di(1-\frac{1}{n})
  $$
  $i$ 为入射角 . 



### 反射棱镜

- 结构常数

  ​	光轴在棱镜中的长度与棱镜通光口径之比
  $$
  K=\frac{d}{D}
  $$



- 五角棱镜
  $$
  K=2+\sqrt{2}
  \notag
  $$
  
- 达夫棱镜
  $$
  K=\frac{1}{\sin(45^{\circ}-i)}
  \notag
  $$
  

  达夫棱镜的重要性质在于当它绕平行于反射面的轴转 $\alpha$ 角时，物体的反射像将转过 $2\alpha$ 角。



- 屋脊棱镜

  可以增加一次反射，改变像坐标系的左右旋向。



- 由物坐标求像坐标
  - 光轴方向 $z’$ 不变
  - 垂直于主截面的坐标 $x’$ 视屋脊个数而定：奇数个倒转，偶数个不变。 或者：沿方向画一画确定
  - $y’$ 坐标根据总反射次数而定：奇数次变左手系。



- 角锥棱镜

  - 从底面以任意方向入射的光线，经三个反射面顺序反射后，以与入射光线相反的方向从底面射出。

  - 当棱镜角以角顶为中心向任意方向偏转时，出射光线方向不变。
  - 用
  - 矢量形式的反射定律证明





### 折射棱镜

<img src="https://tva1.sinaimg.cn/large/00831rSTly1gcv1smbisuj30ad06t0sr.jpg" style="zoom: 67%;" />



- 偏角公式
  $$
  \sin(\frac{\alpha+\delta_{min}}{2})=n\sin\frac{\alpha}{2}
  $$
  此时 $I_1=-I_2’, I’_1=-I_2$ .

- 近轴简化：入射角有一定大小，折射角 $\alpha$ 很小
  $$
  \delta=\alpha\big(n\frac{\cos I'_1}{\cos I_1}-1\big)
  $$



- 近轴简化：入射角很小，折射角很小
  $$
  \delta=(n-1)\alpha
  $$
  





## 4. 理想光学系统

![image-20200324211216424](https://tva1.sinaimg.cn/large/00831rSTly1gd5cgjb5nej32720rstdm.jpg)

​	理想光学系统，就是能对任意宽空间内的点以任意宽的光束成完善像的光学系统。

### （1）基本概念

- 主点、主平面
- 节点
- 基点
- 焦物距、焦像距
- 光焦度：折合焦距的倒数
- 视觉放大率
- 物距$\ell$ : 主点到物点到距离，像距$\ell'$ : 主点到像点到距离



### （2）作图技巧

- 辅助光线：

  - 平行光轴入射
  - 过物方焦点入射
  - 过节点入射

- 依据：

  - 倾斜光轴入射的平行光束过系统后会聚雨像方焦平面

  - 物方焦平面上一点发出的光束经系统后相互平行

  - 光线与物方、像方主面 的交点，其高度相等

    

### （3）公式荟萃

#### 焦距

单个光组：
$$
\begin{aligned}
(基本)\quad &f'=\frac{h}{u'},\quad f=\frac{h}{u}\\
(牛顿公式)\quad & xx'=ff'\\
(高斯公式)\quad &\frac{f'}{l'}+\frac{f}{l}=1\\
&\beta=-\frac{f}{x}=-\frac{x'}{f'}\\
&\frac{f'}{f}=-\frac{n'}{n}\\
& \varphi=\frac{n'}{f'}=-\frac{n}{f}
\end{aligned}
$$
两个光组：
$$
\begin{aligned}
(牛顿公式)\quad &x_F'=\frac{f_2 f_2'}{\Delta},x_F=\frac{f_1 f_1'}{\Delta} \\
(三角形相似)\quad & f'=-\frac{f_1' f_2'}{\Delta},f=\frac{f_1 f_2}{\Delta}\\ 
&\Delta=d-f_1'-f_2'
\end{aligned}
$$


多个光组（$k$ 个）：
$$
\begin{aligned}
&f'=\frac{h_1}{u_k'}\\
(截距计算法) \quad &f'=\frac{l_1'l_2'\cdots l_l'}{l_2l_3\cdots l_k}\\
\end{aligned}
$$

​		截距计算法：令 $l_1=-\infty$ , 对每一个光组重复应用高斯公式求得物距像距，最后可推出总焦距。



望远镜系统：
				将第二系统的焦距扩大到 $\Gamma$ 倍。（把远处物体拉近到感觉，张角变大了）





#### 焦物距/焦像距

牛顿公式、截距计算法。

单个光组：
$$
\begin{aligned}
&xx'=ff'\\
&\beta=-\frac{x'}{f'}=-\frac{f}{x}\\
(焦距-焦物距-物距)\quad &x=l-f,x'=l'-f'
\end{aligned}
$$



两个光组：

​	对第一光组，焦像距 $x'=\Delta$,  对第一光组，焦物距 $x=-\Delta$
$$
x_F'=-\frac{f_2f_2'}{\Delta},x_F=\frac{f_1f_1'}{\Delta}
\notag
$$




#### 放大率

$$
\begin{aligned}
&\beta=\frac{y'}{y}=-\frac{x'}{f'}=-\frac{f}{x}\\
(轴向放大率)\quad& \alpha=-\frac{x'}{x}\\
&\alpha\gamma=\beta\\
(两个光组) \quad & \beta=-\frac{f_1f_2/\Delta}{x_1-f_1f_2'/\Delta}=\frac{f_1f_2}{f_1f_1'-x_1\Delta}\\
(重要，常用) \quad &\beta=\frac {l'} l=\frac{f'}{l+f'}

\end{aligned}
$$





#### 光焦度

$$
\begin{aligned}
(定义)\quad &\phi=\frac{n'}{f'}=-\frac{n}{f}\\
(空气中,双光组)\quad &\phi=\phi_1+\phi_2-d\phi_1\phi_2\\
(空气中，多光组)\quad &\phi=\frac{1}{h_1}\sum_{i=1}^k h_i\phi_i
\end{aligned}
$$



#### 正切计算法

<img src="https://tva1.sinaimg.cn/large/00831rSTly1gd5bun7wn4j329a0rsjvx.jpg" alt="image-20200324211447349" style="zoom: 25%;" />

<img src="https://tva1.sinaimg.cn/large/00831rSTly1gd5bp3fc1kj31xe0rsn21.jpg" alt="image-20200324210927813" style="zoom:25%;" />

顺着光路走下去。关键是一步一步地求 $h$ 和 $u$ .
$$
\begin{aligned}
&\frac{1}{l'}-\frac{1}{l}=\frac{1}{f'}\implies u_1'-u_1=\frac{h_1}{f_1'},u_2'-u_2=\frac{h_2}{f_2'},\cdots, u'_k-u_{k}=\frac{h_k}{f'_k}\\
&u_i=u'_{i-1}\\
&l_i=l'_{i-1}-d_i \implies h_i=h_{i-1}-d_{i-1}u'_{i-1}\\


\end{aligned}
$$





### （4）透镜







## 5. 光束限制

### 孔径光阑





### 视场光阑





### 渐晕光阑







### 景深

















## 6. 光度学基础

### 基本术语

- 以电磁辐射形式发射、传输或接收的能量：辐射能 $Q_e$
- 单位时间内发射、传输或接收的辐射能：辐射通量 / 辐射功率 $\Phi_e$

- 辐射通量中人眼能感受到的部分：光通量 $\Phi_v$ （单位为流明 lm ）

- 某一方向上单位立体角的光通量：发光强度 $I_v$ （单位为坎德拉 cd ）
- （垂直方向）单位面积接受的光通量：光照度 $E_v$  (单位为勒克斯 lx )
- （垂直方向）单位面积发出的光通量：光出射度 $M_v$
- 光源发光投影到某一方向上单位面积的发光强度：光亮度 $L_v$  （单位为尼特 nt ）



理解：光照度表征表面接受的光的性质；光亮度表征光源的发光性质，用立体角度量，而且是单位面积，是一个比光出射度更好的光源发光性质描述。



### 辅助量和联系量

- 立体角
  - $\Omega=\displaystyle\frac{S}{r^2}$
  - $d \Omega=\sin i \cdot di\cdot d\phi$
  - $\Omega=\displaystyle\iint_S \sin i did\phi=(\phi_{\max}-\phi_{\min})(\cos i_{\min}-\cos i_{\max})$
  - 平面孔径角 $U$, $\Omega=\displaystyle\int_0^{2\pi}d\phi\int_0^U\sin i di=4\pi \sin^2\left(\frac U 2\right)\approx \pi u^2$



- 光谱光视效率 / 视见函数 $V(\lambda)$

  ​		反映人眼的光谱灵敏度，表示人眼对不同波长辐射对敏感度差异。

  ​		和辐射通量直接的换算： $1W$（辐射通量）$=683\cdot V(\lambda)$ lm

  

- 发光效率 $\eta$

  ​		辐射体发出的总光通量与该光源的耗电功率之比。

  ​		$\eta=\displaystyle\frac{\Phi_v}{P}$





### 重要关系

- 光亮度 : $L_v=\displaystyle\frac{I_v}{dA\cos i}=\frac{d\Phi_v}{d\Omega dA\cos i}$

- 朗伯辐射体且面积为 $A$ : $I_N=L_vA$

- 朗伯辐射体已知光出射度或二次辐射源 : 
  $$
  L_v=\frac{M_v}{\pi}=\frac{\rho E_v}{\pi}
  $$
  



### 基本定律

#### 朗伯定律

一个光亮度再各个方向上均相等的发光面源（朗伯辐射体），在某一方向上的发光强度等于该面元法线方向上的发光强度与方向角余弦之积。
$$
I_i=I_N\cos i
$$


- 朗伯辐射体在孔径角 $U$ 范围内发出的光通量
  $$
  \begin{align}
  d\Phi_v&=L_v\cos i dAd\Omega\notag \\
  \implies \Phi_v&=\int_0^{2\pi}d\phi\int_0^UL_v\sin i\cos idA di\notag \\
  &=\pi L_v\sin^2 U dA\\
  &=\pi I\sin^2 U(?)
  \end{align}
$$
  
  
- 孔径角为 $\displaystyle \frac \pi 2$ 时（平面），$L_v=\displaystyle \frac{\Phi_v }{\pi dA}=\frac{M_v}{\pi}$



#### 距离平方反比定律

点光源直接照射表面时，受照面光照度为
$$
E_v=\frac{I_v}{r^2}
$$
#### 照度余弦定则

光源不垂直于照明面元时的光照度为
$$
E_v=\frac{I_0\cos i}{r^2}=E_v\cos i
$$


### 光束光亮度的传递

- 面光源照射时受照表面的光照度
$$
  E_v=\frac{L_v d S_1\cos i_1\cos i_2}{r^2}
$$
  $i_1,i_2$ 分别为两面法线与距离  $\vec r$ 直接的夹角。



- 光在无损介质中传播时，各截面上的光亮度相等。

- 不同介质分界面上光束的传递 :
$$
  \begin{align}
  \rho&\approx\left(\frac{n'-n}{n'+n}\right)^2,\tau=1-\rho\\
  L_r&=\rho L_i\\
  L_t&=\left(\frac{n'}{n}\right)^2\tau L_i


  \end{align}
$$
  

  

### 光学成像系统的像面照度

#### 轴上像点
$$
\begin{align}
E_0'&=\frac{\Phi_v'}{dS'}=\tau \frac{\pi L_v \sin^2 U dS}{dS'}\\
&=\frac{1}{\beta^2}\tau \pi L_v\sin^2 U &\text{(物空间)}\\
&=\left(\frac{n'}{n}\right)^2\tau\pi L_v\sin^2 U' &\text{(像空间)}\\
\end{align}
$$
其中用到正弦关系：$ny\sin U=n’y’\sin U'$



#### 轴外像点

设轴外像点 $B’$ 的像方视场角（对出瞳的张角）为 $\omega'$
$$
\begin{align}
\sin U_B'&\approx \sin U'\cos ^2\omega\\
E_B'&=E_0\cos^4\omega'

\end{align}
$$


























# 应用光学实验

## 手机摄像头焦距测量

### 通用知识（手机）

- 手机摄像头近似认为是薄透镜

- 视场光阑：CMOS光敏面最外面一圈

- 一般手机数值孔径：广角～1.8，数值越小难度越大；长焦～2.4，大的到2.8

- 一般手机焦距： 4～6mm

- 等效焦距

  - 同样焦距的镜头，在不同尺寸的感光元件上，成像视角不同，仅以镜头的物理焦距，无法比较不同相机的成像范围（视场角）。

  - 为了便于比较，人们习惯将不同尺寸感光元件上成像的视角，转化为 *36 x 24 mm 全画幅感光元件上同样成像视角所对应的镜头焦距*，这个转化后的焦距就是等效焦距

  - 物理焦距 $\times$ 转换系数 $=$ 等效焦距，

    其中 转换系数 $=$ 43.27 ( 全画幅对角线长) $/$ 传感器光面对角线长

  - 手机的等效焦距有个坑，1英寸手机厂商这里是 16 mm ，而不是 25.4 mm



### iPhone X (实验手机)

- iPhone X 后置摄像头

  - 主摄：广角 $F/1.8 $
  - 副摄：长焦 $F/2.4$

- CMOS : IMX385 1.22 µm

- 正常拍照模式下一倍变焦用的是广角镜头，二倍变焦用的长焦镜头，人像模式下是两个镜头同时使用，后台计算像场和景深。另外，**长焦镜头使用了更小的光圈，因此需要更多的光线**，苹果让 iPhone 自己来判定光线是否足够，从而启动长焦镜头。

- 物方视场角 FOV：视场角分物方视场角和像方视场角。一般光学设备的使用者关心的是物方视场角。

  对于大多数光学仪器,视场角的度量都是以成像物的直径作为视场角计算的。

- 光瞳直径 $=$ 焦距 $/$ 光圈数 $F$



### 实验方法

- 找一张白纸，用直尺画上一条直线，我画的是 150 mm $\implies l=-150$

- 直线一端直立放一把尺子，另一端放手机

- 一倍正常拍摄一张，用的是主（广角）镜头；二倍数字变焦放大拍摄一张，用的是副（长焦）镜头

- 隔空投送到电脑上，用 PhotoShop 寻找尺子 1cm～2cm 的像素距离。

  具体方法为：Ctrl+R 出现横纵坐标轴，在坐标轴上右键选像素，变成像素坐标。在 1cm～2cm 画一个矩形，记录像素距离

- 查找 CMOS 传感器的 unit cell （比如 IMX363 2.4 µm 一个像素点）, 计算实际像高

- 由 $\displaystyle \beta=\frac{y’}{y}=\frac{l’}{l}$ 得到像距 $l’$ ，有了 $l’$ 其他的都可以算了

- 焦距 $f’=\displaystyle\frac{1}{1/l’-1/l}$ （高斯公式）

- 光瞳直径 $\displaystyle D=\frac{f’}{F}$  ，$F$ 为光圈数

- 物方视场角 $\displaystyle FOV=2\arctan\left(\frac{d/2}{l'}\right)$  其中 $d$ 为传感器对角线长





### 实验代码

```python
import numpy as np


def get_l1(px, unit, y=10):
        # 计算像高y1,像距l1
    l = 150
    y1 = px * unit / 1000
    beta = y1 / y
    l1 = beta * l
    return y1, l1


def get_f(l1, l):
        # 计算焦距
    return 1 / (1 / l1 + 1 / l)


def get_diaglen(x, y):
        # 获得对角线长度
    return np.sqrt(x**2 + y**2)


def get_FOV(diag, l1):
        # 计算物方视场角
    return 2 * np.arctan(diag / 2 / l1) * 180 / np.pi


def get_D(f, F):
        # 获得光瞳直径
    return f / F


def r(x, N=4):
        # 保留四位小数
    return round(x, N)


px1 = 237
px2 = 432
F1 = 1.8
F2 = 2.4
unit = 1.22
l = 150
diag = 6.15
trans = 43.27 / diag

y1, l1 = get_l1(px1, unit)
y2, l2 = get_l1(px2, unit)
f1 = get_f(l1, l)
f2 = get_f(l2, l)
D1 = get_D(f1, F1)
D2 = get_D(f2, F2)
FOV1 = get_FOV(diag, l1)
FOV2 = get_FOV(diag, l2)
# diag = get_diaglen(5.21, 6.29)

# print('传感器对角线长：', round(diag, 4))

print('--广角--')
print('焦距：', r(f1))
print('等效焦距', r(trans * f1))
print('物方视场角：', r(FOV1))
print('光瞳直径: ', r(D1))
print()
print('--长焦--')
print('焦距：', r(f2))
print('等效焦距', r(trans * f2))
print('物方视场角：', r(FOV2))
print('光瞳直径: ', r(D2))


def get_err(y1):
    l0 = 1 / (1 / 4 - 1 / 150)
    y0 = 10 * l0 / 150  # 10mm原像,150物距
    return np.abs(y0 - y1) / y0


print()
print('--误差计算--')

err_y = get_err(y1)
print('像高误差-主镜头:', r(err_y) * 100, '%')
print('焦距误差-主镜头', r(np.abs((f1 - 4.0)) / 4.0) * 100, '%')
beta1 = l1 / l
print()
print('--放大倍率计算--')
print('横向放大倍率', r(beta1))
print('显示图像放大倍率', r(143.6 / (beta1 * 10)))

```



##### 结果

```python
--广角--
焦距： 4.2152
等效焦距 29.6573
物方视场角： 70.6732
光瞳直径:  2.3418

--长焦--
焦距： 7.5098
等效焦距 52.8373
物方视场角： 42.5086
光瞳直径:  3.1291

--误差计算--
像高误差-主镜头: 5.54 %
焦距误差-主镜头 5.38 %

--放大倍率计算--
横向放大倍率 0.0289
显示图像放大倍率 496.6452
```





## 光学组合实验



200px

1.22